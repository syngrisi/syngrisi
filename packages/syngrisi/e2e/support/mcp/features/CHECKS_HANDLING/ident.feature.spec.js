// Generated from: ../../features/CHECKS_HANDLING/ident.feature
import { test } from "../../../fixtures/index.ts";

test.describe('Ident flow', () => {

  test('Ident flow, same ident [accepted, passed]', { tag: ['@fast-server'] }, async ({ Given, When, Then, appServer, testData }) => { 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        browserVersion: 1.0\n        browserFullVersion: 1.0.111.1\n        filePath: files/A.png"}}, { appServer, testData }); 
    await When('I accept via http the 1st check with name "IdentCheck"', null, { appServer, testData }); 
    await Then('I expect via http 1st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  branch: IdentBranch\n  markedAs: accepted\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 1st baseline filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  branch: IdentBranch"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        browserVersion: 2.0\n        browserFullVersion: 2.0.222.2\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Then('I expect via http 1st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  branch: IdentBranch\n  markedAs: accepted\n  status: [passed]"}}, { appServer, testData }); 
  });

  test('Ident flow, different ident all tests are new', { tag: ['@fast-server'] }, async ({ Given, When, Then, appServer, testData }) => { 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_0\n  branch: IdentBranch\n  project: IdentApp\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await When('I accept via http the 1st check with name "IdentCheck"', null, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_viewport\n  branch: IdentBranch\n  project: IdentApp\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x1000\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_browser\n  branch: IdentBranch\n  project: IdentApp\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: chrome\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_os\n  branch: IdentBranch\n  project: IdentApp\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: macOs\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_branch\n  branch: IdentBranch_1\n  project: IdentApp\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest_project\n  branch: IdentBranch\n  project: IdentApp_1\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Then('I expect via http 6st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 5st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x1000\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 4st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  browserName: chrome\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 3st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  os: macOs\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 2st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  branch: IdentBranch_1\n  status: [new]"}}, { appServer, testData }); 
    await Then('I expect via http 2st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  status: [new]"}}, { appServer, testData }); 
  });

  test('Ident flow, same ident [unaccepted, failed]', { tag: ['@fast-server'] }, async ({ Given, Then, appServer, testData }) => { 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await Then('I expect via http 1st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  branch: IdentBranch\n  status: [failed]\n  failReasons: [not_accepted]"}}, { appServer, testData }); 
  });

  test('Ident flow, same ident [accepted, failed]', { tag: ['@fast-server'] }, async ({ Given, When, Then, appServer, testData }) => { 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/A.png"}}, { appServer, testData }); 
    await When('I accept via http the 1st check with name "IdentCheck"', null, { appServer, testData }); 
    await Given('I create "1" tests with:', {"docString":{"content":"  testName: IdentTest\n  project: IdentApp\n  branch: IdentBranch\n  checks:\n      - checkName: IdentCheck\n        viewport: 500x500\n        browserName: safari\n        os: Windows\n        filePath: files/B.png"}}, { appServer, testData }); 
    await Then('I expect via http 1st check filtered as "name=IdentCheck" matched:', {"docString":{"content":"  name: IdentCheck\n  viewport: 500x500\n  browserName: safari\n  os: Windows\n  branch: IdentBranch\n  status: [failed]\n  failReasons: [different_images]"}}, { appServer, testData }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('../../features/CHECKS_HANDLING/ident.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":6,"pickleLine":11,"tags":["@fast-server"],"steps":[{"pwStepLine":7,"gherkinStepLine":13,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":27,"keywordType":"Action","textWithKeyword":"When I accept via http the 1st check with name \"IdentCheck\"","stepMatchArguments":[{"group":{"start":22,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":42,"value":"\"IdentCheck\"","children":[{"start":43,"value":"IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":9,"gherkinStepLine":29,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 1st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":10,"gherkinStepLine":40,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 1st baseline filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":43,"value":"\"name=IdentCheck\"","children":[{"start":44,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":11,"gherkinStepLine":51,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":12,"gherkinStepLine":66,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 1st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":15,"pickleLine":77,"tags":["@fast-server"],"steps":[{"pwStepLine":16,"gherkinStepLine":79,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":91,"keywordType":"Action","textWithKeyword":"When I accept via http the 1st check with name \"IdentCheck\"","stepMatchArguments":[{"group":{"start":22,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":42,"value":"\"IdentCheck\"","children":[{"start":43,"value":"IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":93,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":19,"gherkinStepLine":106,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":119,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":132,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":144,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":23,"gherkinStepLine":157,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 6st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"6st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":166,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 5st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"5st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":173,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 4st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"4st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":180,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 3st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"3st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":187,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 2st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"2st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":194,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 2st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"2st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":31,"pickleLine":200,"tags":["@fast-server"],"steps":[{"pwStepLine":32,"gherkinStepLine":202,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":216,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":229,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 1st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":37,"pickleLine":240,"tags":["@fast-server"],"steps":[{"pwStepLine":38,"gherkinStepLine":242,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":39,"gherkinStepLine":254,"keywordType":"Action","textWithKeyword":"When I accept via http the 1st check with name \"IdentCheck\"","stepMatchArguments":[{"group":{"start":22,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":42,"value":"\"IdentCheck\"","children":[{"start":43,"value":"IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":40,"gherkinStepLine":257,"keywordType":"Context","textWithKeyword":"Given I create \"1\" tests with:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":41,"gherkinStepLine":270,"keywordType":"Outcome","textWithKeyword":"Then I expect via http 1st check filtered as \"name=IdentCheck\" matched:","stepMatchArguments":[{"group":{"start":18,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":40,"value":"\"name=IdentCheck\"","children":[{"start":41,"value":"name=IdentCheck","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end