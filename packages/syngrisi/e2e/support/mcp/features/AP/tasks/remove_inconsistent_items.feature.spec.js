// Generated from: ../../features/AP/tasks/remove_inconsistent_items.feature
import { test } from "../../../../fixtures/index.ts";

test.describe('Remove Inconsistent items', () => {

  test.beforeEach('Background', async ({ When, appServer, testData }, testInfo) => { if (testInfo.error) return;
    await When('I create "1" tests with params:', {"docString":{"content":"    run: RunName\n    suite: SuiteName\n    testName: TestName\n    checkName: CheckName"}}, { appServer, testData }); 
  });
  
  test('Abandoned File', { tag: ['@smoke', '@fast-server'] }, async ({ Given, When, Then, appServer, testData }) => { 
    await Then('I expect exact "1" snapshot files', null, { appServer, testData }); 
    await Given('I stop Server', null, { appServer, testData }); 
    await When('I clear database', null, { appServer, testData }); 
    await When('I create "1" tests with params:', {"docString":{"content":"    run: RunName\n    suite: SuiteName\n    testName: TestName\n    checkName: CheckName"}}, { appServer, testData }); 
    await Then('I expect exact "2" snapshot files', null, { appServer, testData }); 
    await When('I remove via http Inconsistent items', null, { appServer, testData }); 
    await Then('I expect exact "1" snapshot files', null, { appServer, testData }); 
  });

  test('Abandoned Snapshot, Check, Test, Suite, Run', { tag: ['@smoke', '@fast-server'] }, async ({ When, Then, appServer, testData }) => { 
    await Then('I expect exact "1" snapshot files', null, { appServer, testData }); 
    await Then('I expect via http that "CheckName" check exist exactly "1" times', null, { appServer, testData }); 
    await Then('I expect via http that "CheckName" check exist exactly "1" times', null, { appServer, testData }); 
    await Then('I expect via http that "TestName - 1" test exist exactly "1" times', null, { appServer, testData }); 
    await When('I clear screenshots folder', null, { appServer, testData }); 
    await Then('I expect exact "0" snapshot files', null, { appServer, testData }); 
    await When('I remove via http Inconsistent items', null, { appServer, testData }); 
    await Then('I expect via http that "CheckName" snapshot exist exactly "0" times', null, { appServer, testData }); 
    await Then('I expect via http that "CheckName" check exist exactly "1" times', null, { appServer, testData }); 
    await Then('I expect via http that "TestName - 1" test exist exactly "1" times', null, { appServer, testData }); 
    await When('I remove via http Inconsistent items', null, { appServer, testData }); 
    await Then('I expect via http that "CheckName" check exist exactly "0" times', null, { appServer, testData }); 
    await Then('I expect via http that "TestName - 1" test exist exactly "1" times', null, { appServer, testData }); 
    await Then('I expect via http that "RunName" run exist exactly "1" times', null, { appServer, testData }); 
    await Then('I expect via http that "SuiteName" suite exist exactly "1" times', null, { appServer, testData }); 
    await When('I remove via http Inconsistent items', null, { appServer, testData }); 
    await Then('I expect via http that "TestName - 1" test exist exactly "0" times', null, { appServer, testData }); 
    await Then('I expect via http that "RunName" run exist exactly "0" times', null, { appServer, testData }); 
    await Then('I expect via http that "SuiteName" suite exist exactly "0" times', null, { appServer, testData }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('../../features/AP/tasks/remove_inconsistent_items.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":10,"pickleLine":15,"tags":["@smoke","@fast-server"],"steps":[{"pwStepLine":7,"gherkinStepLine":7,"keywordType":"Action","textWithKeyword":"When I create \"1\" tests with params:","isBg":true,"stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":11,"gherkinStepLine":16,"keywordType":"Outcome","textWithKeyword":"Then I expect exact \"1\" snapshot files","stepMatchArguments":[{"group":{"start":15,"value":"\"1\"","children":[{"start":16,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":12,"gherkinStepLine":17,"keywordType":"Context","textWithKeyword":"Given I stop Server","stepMatchArguments":[]},{"pwStepLine":13,"gherkinStepLine":18,"keywordType":"Action","textWithKeyword":"When I clear database","stepMatchArguments":[]},{"pwStepLine":14,"gherkinStepLine":21,"keywordType":"Action","textWithKeyword":"When I create \"1\" tests with params:","stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":28,"keywordType":"Outcome","textWithKeyword":"Then I expect exact \"2\" snapshot files","stepMatchArguments":[{"group":{"start":15,"value":"\"2\"","children":[{"start":16,"value":"2","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":16,"gherkinStepLine":29,"keywordType":"Action","textWithKeyword":"When I remove via http Inconsistent items","stepMatchArguments":[]},{"pwStepLine":17,"gherkinStepLine":30,"keywordType":"Outcome","textWithKeyword":"Then I expect exact \"1\" snapshot files","stepMatchArguments":[{"group":{"start":15,"value":"\"1\"","children":[{"start":16,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":20,"pickleLine":32,"tags":["@smoke","@fast-server"],"steps":[{"pwStepLine":7,"gherkinStepLine":7,"keywordType":"Action","textWithKeyword":"When I create \"1\" tests with params:","isBg":true,"stepMatchArguments":[{"group":{"start":9,"value":"\"1\"","children":[{"start":10,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":33,"keywordType":"Outcome","textWithKeyword":"Then I expect exact \"1\" snapshot files","stepMatchArguments":[{"group":{"start":15,"value":"\"1\"","children":[{"start":16,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":34,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"CheckName\" check exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"CheckName\"","children":[{"start":24,"value":"CheckName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"1\"","children":[{"start":56,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":23,"gherkinStepLine":35,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"CheckName\" check exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"CheckName\"","children":[{"start":24,"value":"CheckName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"1\"","children":[{"start":56,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":36,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"TestName - 1\" test exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"TestName - 1\"","children":[{"start":24,"value":"TestName - 1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":57,"value":"\"1\"","children":[{"start":58,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":38,"keywordType":"Action","textWithKeyword":"When I clear screenshots folder","stepMatchArguments":[]},{"pwStepLine":26,"gherkinStepLine":39,"keywordType":"Outcome","textWithKeyword":"Then I expect exact \"0\" snapshot files","stepMatchArguments":[{"group":{"start":15,"value":"\"0\"","children":[{"start":16,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":41,"keywordType":"Action","textWithKeyword":"When I remove via http Inconsistent items","stepMatchArguments":[]},{"pwStepLine":28,"gherkinStepLine":42,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"CheckName\" snapshot exist exactly \"0\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"CheckName\"","children":[{"start":24,"value":"CheckName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":58,"value":"\"0\"","children":[{"start":59,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":29,"gherkinStepLine":43,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"CheckName\" check exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"CheckName\"","children":[{"start":24,"value":"CheckName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"1\"","children":[{"start":56,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":30,"gherkinStepLine":44,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"TestName - 1\" test exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"TestName - 1\"","children":[{"start":24,"value":"TestName - 1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":57,"value":"\"1\"","children":[{"start":58,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":31,"gherkinStepLine":47,"keywordType":"Action","textWithKeyword":"When I remove via http Inconsistent items","stepMatchArguments":[]},{"pwStepLine":32,"gherkinStepLine":48,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"CheckName\" check exist exactly \"0\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"CheckName\"","children":[{"start":24,"value":"CheckName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"0\"","children":[{"start":56,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":49,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"TestName - 1\" test exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"TestName - 1\"","children":[{"start":24,"value":"TestName - 1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":57,"value":"\"1\"","children":[{"start":58,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":50,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"RunName\" run exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"RunName\"","children":[{"start":24,"value":"RunName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":51,"value":"\"1\"","children":[{"start":52,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":51,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"SuiteName\" suite exist exactly \"1\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"SuiteName\"","children":[{"start":24,"value":"SuiteName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"1\"","children":[{"start":56,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":36,"gherkinStepLine":54,"keywordType":"Action","textWithKeyword":"When I remove via http Inconsistent items","stepMatchArguments":[]},{"pwStepLine":37,"gherkinStepLine":55,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"TestName - 1\" test exist exactly \"0\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"TestName - 1\"","children":[{"start":24,"value":"TestName - 1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":57,"value":"\"0\"","children":[{"start":58,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":56,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"RunName\" run exist exactly \"0\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"RunName\"","children":[{"start":24,"value":"RunName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":51,"value":"\"0\"","children":[{"start":52,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":39,"gherkinStepLine":57,"keywordType":"Outcome","textWithKeyword":"Then I expect via http that \"SuiteName\" suite exist exactly \"0\" times","stepMatchArguments":[{"group":{"start":23,"value":"\"SuiteName\"","children":[{"start":24,"value":"SuiteName","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"0\"","children":[{"start":56,"value":"0","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end