// Generated from: features/DEMO/sso_saml_setup_demo.feature
import { test } from "../../../support/fixtures/index.ts";

test.describe('SSO SAML Setup Demo', () => {

  test('Demo Part 1: Understanding IdP Configuration for SAML', { tag: ['@demo', '@slow', '@saml', '@sso'] }, async ({ Given, When, Then, And, appServer, page, testData }) => { 
    await When('I set env variables:', {"docString":{"content":"SYNGRISI_AUTH: true\nSSO_ENABLED: false\nSYNGRISI_TEST_MODE: true"}}, { appServer }); 
    await Given('I start Server', null, { appServer, testData }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "Welcome to Part 1: Understanding IdP Configuration for SAML"', null, { page }); 
    await Then('the title is "Login Page"', null, { page }); 
    await When('I announce: "This is Syngrisi - a visual regression testing tool."', null, { page }); 
    await When('I announce: "We want to enable Single Sign-On (SSO) using SAML 2.0."', null, { page }); 
    await When('I announce: "To do this, we need to configure both sides: the Identity Provider (IdP) and Syngrisi."', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "WHAT YOU NEED TO CONFIGURE IN YOUR IdP (Okta, Azure AD, Logto, etc.)"', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "STEP 1: Set the Assertion Consumer Service (ACS) URL"', null, { page }); 
    await When('I announce: "This is where your IdP sends SAML responses after authentication."', null, { page }); 
    await When('I announce: "For Syngrisi, use: https://your-syngrisi-domain/v1/auth/sso/saml/callback"', null, { page }); 
    await When('I announce: "Example: https://syngrisi.example.com/v1/auth/sso/saml/callback"', null, { page }); 
    await When('I announce: "STEP 2: Set the Service Provider Entity ID"', null, { page }); 
    await When('I announce: "This uniquely identifies Syngrisi to the IdP."', null, { page }); 
    await When('I announce: "Use your Syngrisi base URL or a custom identifier."', null, { page }); 
    await When('I announce: "Example: https://syngrisi.example.com or syngrisi-production"', null, { page }); 
    await When('I announce: "IMPORTANT: This must match SSO_ISSUER in Syngrisi configuration!"', null, { page }); 
    await When('I announce: "STEP 3: Set the Name ID Format"', null, { page }); 
    await When('I announce: "This determines how user identity is sent in the SAML assertion."', null, { page }); 
    await When('I announce: "Recommended: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"', null, { page }); 
    await When('I announce: "Syngrisi uses email to identify and create users."', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "WHAT YOUR IdP PROVIDES (copy these to Syngrisi)"', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "1. SSO URL (Entry Point)"', null, { page }); 
    await When('I announce: "   - Where Syngrisi sends authentication requests"', null, { page }); 
    await When('I announce: "   - Set as SSO_ENTRY_POINT in Syngrisi"', null, { page }); 
    await When('I announce: "   - Example: https://your-idp.com/saml/sso"', null, { page }); 
    await When('I announce: "2. IdP Entity ID (Issuer)"', null, { page }); 
    await When('I announce: "   - Your IdP\'s unique identifier"', null, { page }); 
    await When('I announce: "   - Set as SSO_IDP_ISSUER in Syngrisi"', null, { page }); 
    await When('I announce: "   - Example: https://your-idp.com/saml"', null, { page }); 
    await When('I announce: "3. Signing Certificate"', null, { page }); 
    await When('I announce: "   - For verifying SAML assertion signatures"', null, { page }); 
    await When('I announce: "   - Set as SSO_CERT in Syngrisi"', null, { page }); 
    await When('I announce: "   - Usually in X.509 PEM format"', null, { page }); 
    await When('I announce: "4. Metadata URL (Recommended!)"', null, { page }); 
    await When('I announce: "   - Single URL containing all IdP configuration"', null, { page }); 
    await When('I announce: "   - Set as SSO_IDP_METADATA_URL in Syngrisi"', null, { page }); 
    await When('I announce: "   - Syngrisi auto-fetches SSO URL, cert, and entity ID"', null, { page }); 
    await When('I announce: "   - Example: https://your-idp.com/saml/metadata"', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "SUMMARY: IdP Configuration Checklist"', null, { page }); 
    await When('I announce: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"', null, { page }); 
    await When('I announce: "✓ Create SAML application in your IdP"', null, { page }); 
    await When('I announce: "✓ Set ACS URL to: https://your-syngrisi/v1/auth/sso/saml/callback"', null, { page }); 
    await When('I announce: "✓ Set SP Entity ID (must match SSO_ISSUER)"', null, { page }); 
    await When('I announce: "✓ Set Name ID format to email"', null, { page }); 
    await When('I announce: "✓ Copy IdP metadata URL or individual values to Syngrisi"', null, { page }); 
    await When('I announce: "In Part 2, we\'ll configure Syngrisi with these values and test the login flow."', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

  test('Demo Part 2: Configuring Syngrisi as Service Provider (SP)', { tag: ['@demo', '@slow', '@saml', '@sso', '@sso-external'] }, async ({ Given, When, Then, And, appServer, page, ssoServer, testData }) => { 
    await When('I configure SAML SSO with auto-provisioned settings', null, { ssoServer }); 
    await When('I set env variables:', {"docString":{"content":"SYNGRISI_AUTH: true\nSYNGRISI_TEST_MODE: false"}}, { appServer }); 
    await Given('I start Server', null, { appServer, testData }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "Welcome to Part 2 of SAML SSO Setup. We will configure Syngrisi as a SAML Service Provider."', null, { page }); 
    await Then('the title is "Login Page"', null, { page }); 
    await When('I announce: "Let me explain each configuration parameter for Syngrisi."', null, { page }); 
    await When('I announce: "PARAMETER 1: SSO_ENABLED=true"', null, { page }); 
    await When('I announce: "Purpose: Enables Single Sign-On authentication"', null, { page }); 
    await When('I announce: "Effect: Displays the SSO login button on the login page"', null, { page }); 
    await When('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await When('I announce: "With SSO_ENABLED=true, users see this SSO login button."', null, { page }); 
    await Then('the SSO login button should be visible', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I announce: "PARAMETER 2: SSO_PROTOCOL=saml"', null, { page }); 
    await When('I announce: "Purpose: Specifies the authentication protocol"', null, { page }); 
    await When('I announce: "Options: \'saml\' for SAML 2.0, \'oauth2\' for OAuth2/OIDC"', null, { page }); 
    await When('I announce: "Effect: Determines which authentication flow to use"', null, { page }); 
    await When('I announce: "PARAMETER 3: SSO_ISSUER"', null, { page }); 
    await When('I announce: "Purpose: Service Provider Entity ID"', null, { page }); 
    await When('I announce: "Example: https://syngrisi.example.com"', null, { page }); 
    await When('I announce: "Must match: The SP Entity ID configured in your IdP"', null, { page }); 
    await When('I announce: "Effect: Identifies Syngrisi in SAML requests and assertions"', null, { page }); 
    await When('I announce: "Now let\'s look at how to configure the IdP connection. There are two methods:"', null, { page }); 
    await When('I announce: "METHOD 1: Automatic via Metadata URL (Recommended)"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_IDP_METADATA_URL"', null, { page }); 
    await When('I announce: "Purpose: URL to fetch IdP configuration automatically"', null, { page }); 
    await When('I announce: "Example: https://your-idp.com/saml/metadata"', null, { page }); 
    await When('I announce: "Benefit: Automatically gets SSO URL, certificate, and entity ID"', null, { page }); 
    await When('I announce: "Bonus: Certificate rotation is handled automatically"', null, { page }); 
    await When('I announce: "METHOD 2: Manual Configuration"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_ENTRY_POINT"', null, { page }); 
    await When('I announce: "Purpose: IdP\'s SSO URL where authentication requests are sent"', null, { page }); 
    await When('I announce: "Example: https://your-idp.com/saml/sso"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_CERT"', null, { page }); 
    await When('I announce: "Purpose: IdP\'s signing certificate for verifying SAML assertions"', null, { page }); 
    await When('I announce: "Format: PEM format, can include BEGIN/END markers"', null, { page }); 
    await When('I announce: "Security: Must be set via environment variable, not UI"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_IDP_ISSUER (optional)"', null, { page }); 
    await When('I announce: "Purpose: IdP Entity ID for additional validation"', null, { page }); 
    await When('I announce: "Benefit: Extra security check to verify assertion source"', null, { page }); 
    await When('I announce: "Finally, let\'s configure user management parameters:"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_DEFAULT_ROLE"', null, { page }); 
    await When('I announce: "Purpose: Default role for new users created via SSO"', null, { page }); 
    await When('I announce: "Options: \'reviewer\' (default), \'user\', \'admin\'"', null, { page }); 
    await When('I announce: "Effect: Controls what new SSO users can do in Syngrisi"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_AUTO_CREATE_USERS"', null, { page }); 
    await When('I announce: "Purpose: Automatically create users on first SSO login"', null, { page }); 
    await When('I announce: "Default: true"', null, { page }); 
    await When('I announce: "If false: Users must be pre-created in Syngrisi"', null, { page }); 
    await When('I announce: "PARAMETER: SSO_ALLOW_ACCOUNT_LINKING"', null, { page }); 
    await When('I announce: "Purpose: Link SSO identities to existing local accounts by email"', null, { page }); 
    await When('I announce: "Default: true"', null, { page }); 
    await When('I announce: "Benefit: Existing users can migrate to SSO without losing access"', null, { page }); 
    await When('I announce: "BONUS: SP Metadata Endpoint"', null, { page }); 
    await When('I announce: "Syngrisi provides an endpoint to get SP metadata for IdP configuration:"', null, { page }); 
    await When('I announce: "GET /v1/auth/sso/metadata"', null, { page }); 
    await When('I announce: "Returns XML with Entity ID and ACS URL for your IdP setup"', null, { page }); 
    await When('I announce: "Configuration complete! Let\'s verify it works with a test login."', null, { page }); 
    await When('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await When('I announce: "Click the SSO button to authenticate via SAML."', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I click SSO login button', null, { page }); 
    await When('I announce: "We\'re now at the Identity Provider. Enter credentials to authenticate."', null, { page }); 
    await When('I login to Logto with username "testuser" and password "Test123!"', null, { page }); 
    await Then('I should be redirected back to the app', null, { appServer, page }); 
    await Then('I should be authenticated via SSO', null, { page }); 
    await When('I announce: "Success! SAML SSO is fully configured and working."', null, { page }); 
    await When('I announce: "The user is now authenticated via SAML with all configured parameters in effect."', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

  test('Demo: Complete SAML Setup and Login Flow', { tag: ['@demo', '@slow', '@saml', '@sso', '@sso-external'] }, async ({ Given, When, Then, And, appServer, page, ssoServer, testData }) => { 
    await When('I configure SAML SSO with auto-provisioned settings', null, { ssoServer }); 
    await When('I set env variables:', {"docString":{"content":"SYNGRISI_AUTH: true\nSYNGRISI_TEST_MODE: false"}}, { appServer }); 
    await Given('I start Server', null, { appServer, testData }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "This is a complete SAML SSO demonstration showing configuration and login."', null, { page }); 
    await When('I announce: "SAML Configuration Summary:"', null, { page }); 
    await When('I announce: "SSO_ENABLED: true (enables SSO)"', null, { page }); 
    await When('I announce: "SSO_PROTOCOL: saml (use SAML 2.0)"', null, { page }); 
    await When('I announce: "SSO_ISSUER: SP Entity ID"', null, { page }); 
    await When('I announce: "SSO_IDP_METADATA_URL: Auto-configure from IdP metadata"', null, { page }); 
    await When('I announce: "SSO_DEFAULT_ROLE: reviewer (new user role)"', null, { page }); 
    await When('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await Then('the SSO login button should be visible', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I click SSO login button', null, { page }); 
    await When('I login to Logto with username "testuser" and password "Test123!"', null, { page }); 
    await Then('I should be redirected back to the app', null, { appServer, page }); 
    await Then('I should be authenticated via SSO', null, { page }); 
    await When('I announce: "SAML SSO setup and login complete!"', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('features/DEMO/sso_saml_setup_demo.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":6,"pickleLine":20,"slow":true,"tags":["@demo","@slow","@saml","@sso"],"steps":[{"pwStepLine":7,"gherkinStepLine":25,"keywordType":"Action","textWithKeyword":"When I set env variables:","stepMatchArguments":[]},{"pwStepLine":8,"gherkinStepLine":31,"keywordType":"Context","textWithKeyword":"Given I start Server","stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":33,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":10,"gherkinStepLine":34,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":11,"gherkinStepLine":36,"keywordType":"Action","textWithKeyword":"When I announce: \"Welcome to Part 1: Understanding IdP Configuration for SAML\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Welcome to Part 1: Understanding IdP Configuration for SAML\"","children":[{"start":13,"value":"Welcome to Part 1: Understanding IdP Configuration for SAML","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":12,"gherkinStepLine":37,"keywordType":"Outcome","textWithKeyword":"Then the title is \"Login Page\"","stepMatchArguments":[{"group":{"start":13,"value":"\"Login Page\"","children":[{"start":14,"value":"Login Page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":13,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"When I announce: \"This is Syngrisi - a visual regression testing tool.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This is Syngrisi - a visual regression testing tool.\"","children":[{"start":13,"value":"This is Syngrisi - a visual regression testing tool.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":40,"keywordType":"Action","textWithKeyword":"When I announce: \"We want to enable Single Sign-On (SSO) using SAML 2.0.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"We want to enable Single Sign-On (SSO) using SAML 2.0.\"","children":[{"start":13,"value":"We want to enable Single Sign-On (SSO) using SAML 2.0.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":41,"keywordType":"Action","textWithKeyword":"When I announce: \"To do this, we need to configure both sides: the Identity Provider (IdP) and Syngrisi.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"To do this, we need to configure both sides: the Identity Provider (IdP) and Syngrisi.\"","children":[{"start":13,"value":"To do this, we need to configure both sides: the Identity Provider (IdP) and Syngrisi.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":16,"gherkinStepLine":43,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":44,"keywordType":"Action","textWithKeyword":"When I announce: \"WHAT YOU NEED TO CONFIGURE IN YOUR IdP (Okta, Azure AD, Logto, etc.)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"WHAT YOU NEED TO CONFIGURE IN YOUR IdP (Okta, Azure AD, Logto, etc.)\"","children":[{"start":13,"value":"WHAT YOU NEED TO CONFIGURE IN YOUR IdP (Okta, Azure AD, Logto, etc.)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":45,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":19,"gherkinStepLine":48,"keywordType":"Action","textWithKeyword":"When I announce: \"STEP 1: Set the Assertion Consumer Service (ACS) URL\"","stepMatchArguments":[{"group":{"start":12,"value":"\"STEP 1: Set the Assertion Consumer Service (ACS) URL\"","children":[{"start":13,"value":"STEP 1: Set the Assertion Consumer Service (ACS) URL","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":49,"keywordType":"Action","textWithKeyword":"When I announce: \"This is where your IdP sends SAML responses after authentication.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This is where your IdP sends SAML responses after authentication.\"","children":[{"start":13,"value":"This is where your IdP sends SAML responses after authentication.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":50,"keywordType":"Action","textWithKeyword":"When I announce: \"For Syngrisi, use: https://your-syngrisi-domain/v1/auth/sso/saml/callback\"","stepMatchArguments":[{"group":{"start":12,"value":"\"For Syngrisi, use: https://your-syngrisi-domain/v1/auth/sso/saml/callback\"","children":[{"start":13,"value":"For Syngrisi, use: https://your-syngrisi-domain/v1/auth/sso/saml/callback","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":51,"keywordType":"Action","textWithKeyword":"When I announce: \"Example: https://syngrisi.example.com/v1/auth/sso/saml/callback\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Example: https://syngrisi.example.com/v1/auth/sso/saml/callback\"","children":[{"start":13,"value":"Example: https://syngrisi.example.com/v1/auth/sso/saml/callback","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":23,"gherkinStepLine":54,"keywordType":"Action","textWithKeyword":"When I announce: \"STEP 2: Set the Service Provider Entity ID\"","stepMatchArguments":[{"group":{"start":12,"value":"\"STEP 2: Set the Service Provider Entity ID\"","children":[{"start":13,"value":"STEP 2: Set the Service Provider Entity ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":55,"keywordType":"Action","textWithKeyword":"When I announce: \"This uniquely identifies Syngrisi to the IdP.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This uniquely identifies Syngrisi to the IdP.\"","children":[{"start":13,"value":"This uniquely identifies Syngrisi to the IdP.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":56,"keywordType":"Action","textWithKeyword":"When I announce: \"Use your Syngrisi base URL or a custom identifier.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Use your Syngrisi base URL or a custom identifier.\"","children":[{"start":13,"value":"Use your Syngrisi base URL or a custom identifier.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":57,"keywordType":"Action","textWithKeyword":"When I announce: \"Example: https://syngrisi.example.com or syngrisi-production\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Example: https://syngrisi.example.com or syngrisi-production\"","children":[{"start":13,"value":"Example: https://syngrisi.example.com or syngrisi-production","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":58,"keywordType":"Action","textWithKeyword":"When I announce: \"IMPORTANT: This must match SSO_ISSUER in Syngrisi configuration!\"","stepMatchArguments":[{"group":{"start":12,"value":"\"IMPORTANT: This must match SSO_ISSUER in Syngrisi configuration!\"","children":[{"start":13,"value":"IMPORTANT: This must match SSO_ISSUER in Syngrisi configuration!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":61,"keywordType":"Action","textWithKeyword":"When I announce: \"STEP 3: Set the Name ID Format\"","stepMatchArguments":[{"group":{"start":12,"value":"\"STEP 3: Set the Name ID Format\"","children":[{"start":13,"value":"STEP 3: Set the Name ID Format","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":29,"gherkinStepLine":62,"keywordType":"Action","textWithKeyword":"When I announce: \"This determines how user identity is sent in the SAML assertion.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This determines how user identity is sent in the SAML assertion.\"","children":[{"start":13,"value":"This determines how user identity is sent in the SAML assertion.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":30,"gherkinStepLine":63,"keywordType":"Action","textWithKeyword":"When I announce: \"Recommended: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Recommended: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\"","children":[{"start":13,"value":"Recommended: urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":31,"gherkinStepLine":64,"keywordType":"Action","textWithKeyword":"When I announce: \"Syngrisi uses email to identify and create users.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Syngrisi uses email to identify and create users.\"","children":[{"start":13,"value":"Syngrisi uses email to identify and create users.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":32,"gherkinStepLine":67,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":68,"keywordType":"Action","textWithKeyword":"When I announce: \"WHAT YOUR IdP PROVIDES (copy these to Syngrisi)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"WHAT YOUR IdP PROVIDES (copy these to Syngrisi)\"","children":[{"start":13,"value":"WHAT YOUR IdP PROVIDES (copy these to Syngrisi)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":69,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":71,"keywordType":"Action","textWithKeyword":"When I announce: \"1. SSO URL (Entry Point)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"1. SSO URL (Entry Point)\"","children":[{"start":13,"value":"1. SSO URL (Entry Point)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":36,"gherkinStepLine":72,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Where Syngrisi sends authentication requests\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Where Syngrisi sends authentication requests\"","children":[{"start":13,"value":"   - Where Syngrisi sends authentication requests","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":37,"gherkinStepLine":73,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Set as SSO_ENTRY_POINT in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Set as SSO_ENTRY_POINT in Syngrisi\"","children":[{"start":13,"value":"   - Set as SSO_ENTRY_POINT in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":74,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Example: https://your-idp.com/saml/sso\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Example: https://your-idp.com/saml/sso\"","children":[{"start":13,"value":"   - Example: https://your-idp.com/saml/sso","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":39,"gherkinStepLine":76,"keywordType":"Action","textWithKeyword":"When I announce: \"2. IdP Entity ID (Issuer)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"2. IdP Entity ID (Issuer)\"","children":[{"start":13,"value":"2. IdP Entity ID (Issuer)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":40,"gherkinStepLine":77,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Your IdP's unique identifier\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Your IdP's unique identifier\"","children":[{"start":13,"value":"   - Your IdP's unique identifier","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":41,"gherkinStepLine":78,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Set as SSO_IDP_ISSUER in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Set as SSO_IDP_ISSUER in Syngrisi\"","children":[{"start":13,"value":"   - Set as SSO_IDP_ISSUER in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":42,"gherkinStepLine":79,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Example: https://your-idp.com/saml\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Example: https://your-idp.com/saml\"","children":[{"start":13,"value":"   - Example: https://your-idp.com/saml","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":43,"gherkinStepLine":81,"keywordType":"Action","textWithKeyword":"When I announce: \"3. Signing Certificate\"","stepMatchArguments":[{"group":{"start":12,"value":"\"3. Signing Certificate\"","children":[{"start":13,"value":"3. Signing Certificate","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":44,"gherkinStepLine":82,"keywordType":"Action","textWithKeyword":"When I announce: \"   - For verifying SAML assertion signatures\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - For verifying SAML assertion signatures\"","children":[{"start":13,"value":"   - For verifying SAML assertion signatures","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":45,"gherkinStepLine":83,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Set as SSO_CERT in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Set as SSO_CERT in Syngrisi\"","children":[{"start":13,"value":"   - Set as SSO_CERT in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":46,"gherkinStepLine":84,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Usually in X.509 PEM format\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Usually in X.509 PEM format\"","children":[{"start":13,"value":"   - Usually in X.509 PEM format","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":47,"gherkinStepLine":86,"keywordType":"Action","textWithKeyword":"When I announce: \"4. Metadata URL (Recommended!)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"4. Metadata URL (Recommended!)\"","children":[{"start":13,"value":"4. Metadata URL (Recommended!)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":48,"gherkinStepLine":87,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Single URL containing all IdP configuration\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Single URL containing all IdP configuration\"","children":[{"start":13,"value":"   - Single URL containing all IdP configuration","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":49,"gherkinStepLine":88,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Set as SSO_IDP_METADATA_URL in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Set as SSO_IDP_METADATA_URL in Syngrisi\"","children":[{"start":13,"value":"   - Set as SSO_IDP_METADATA_URL in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":50,"gherkinStepLine":89,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Syngrisi auto-fetches SSO URL, cert, and entity ID\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Syngrisi auto-fetches SSO URL, cert, and entity ID\"","children":[{"start":13,"value":"   - Syngrisi auto-fetches SSO URL, cert, and entity ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":51,"gherkinStepLine":90,"keywordType":"Action","textWithKeyword":"When I announce: \"   - Example: https://your-idp.com/saml/metadata\"","stepMatchArguments":[{"group":{"start":12,"value":"\"   - Example: https://your-idp.com/saml/metadata\"","children":[{"start":13,"value":"   - Example: https://your-idp.com/saml/metadata","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":52,"gherkinStepLine":93,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":53,"gherkinStepLine":94,"keywordType":"Action","textWithKeyword":"When I announce: \"SUMMARY: IdP Configuration Checklist\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SUMMARY: IdP Configuration Checklist\"","children":[{"start":13,"value":"SUMMARY: IdP Configuration Checklist","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":54,"gherkinStepLine":95,"keywordType":"Action","textWithKeyword":"When I announce: \"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","stepMatchArguments":[{"group":{"start":12,"value":"\"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\"","children":[{"start":13,"value":"━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":55,"gherkinStepLine":96,"keywordType":"Action","textWithKeyword":"When I announce: \"✓ Create SAML application in your IdP\"","stepMatchArguments":[{"group":{"start":12,"value":"\"✓ Create SAML application in your IdP\"","children":[{"start":13,"value":"✓ Create SAML application in your IdP","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":56,"gherkinStepLine":97,"keywordType":"Action","textWithKeyword":"When I announce: \"✓ Set ACS URL to: https://your-syngrisi/v1/auth/sso/saml/callback\"","stepMatchArguments":[{"group":{"start":12,"value":"\"✓ Set ACS URL to: https://your-syngrisi/v1/auth/sso/saml/callback\"","children":[{"start":13,"value":"✓ Set ACS URL to: https://your-syngrisi/v1/auth/sso/saml/callback","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":57,"gherkinStepLine":98,"keywordType":"Action","textWithKeyword":"When I announce: \"✓ Set SP Entity ID (must match SSO_ISSUER)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"✓ Set SP Entity ID (must match SSO_ISSUER)\"","children":[{"start":13,"value":"✓ Set SP Entity ID (must match SSO_ISSUER)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":58,"gherkinStepLine":99,"keywordType":"Action","textWithKeyword":"When I announce: \"✓ Set Name ID format to email\"","stepMatchArguments":[{"group":{"start":12,"value":"\"✓ Set Name ID format to email\"","children":[{"start":13,"value":"✓ Set Name ID format to email","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":59,"gherkinStepLine":100,"keywordType":"Action","textWithKeyword":"When I announce: \"✓ Copy IdP metadata URL or individual values to Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"✓ Copy IdP metadata URL or individual values to Syngrisi\"","children":[{"start":13,"value":"✓ Copy IdP metadata URL or individual values to Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":60,"gherkinStepLine":102,"keywordType":"Action","textWithKeyword":"When I announce: \"In Part 2, we'll configure Syngrisi with these values and test the login flow.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"In Part 2, we'll configure Syngrisi with these values and test the login flow.\"","children":[{"start":13,"value":"In Part 2, we'll configure Syngrisi with these values and test the login flow.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":61,"gherkinStepLine":103,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
  {"pwTestLine":64,"pickleLine":110,"slow":true,"tags":["@demo","@slow","@saml","@sso","@sso-external"],"steps":[{"pwStepLine":65,"gherkinStepLine":114,"keywordType":"Action","textWithKeyword":"When I configure SAML SSO with auto-provisioned settings","stepMatchArguments":[]},{"pwStepLine":66,"gherkinStepLine":115,"keywordType":"Action","textWithKeyword":"When I set env variables:","stepMatchArguments":[]},{"pwStepLine":67,"gherkinStepLine":120,"keywordType":"Context","textWithKeyword":"Given I start Server","stepMatchArguments":[]},{"pwStepLine":68,"gherkinStepLine":122,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":69,"gherkinStepLine":123,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":70,"gherkinStepLine":126,"keywordType":"Action","textWithKeyword":"When I announce: \"Welcome to Part 2 of SAML SSO Setup. We will configure Syngrisi as a SAML Service Provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Welcome to Part 2 of SAML SSO Setup. We will configure Syngrisi as a SAML Service Provider.\"","children":[{"start":13,"value":"Welcome to Part 2 of SAML SSO Setup. We will configure Syngrisi as a SAML Service Provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":71,"gherkinStepLine":127,"keywordType":"Outcome","textWithKeyword":"Then the title is \"Login Page\"","stepMatchArguments":[{"group":{"start":13,"value":"\"Login Page\"","children":[{"start":14,"value":"Login Page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":72,"gherkinStepLine":130,"keywordType":"Action","textWithKeyword":"When I announce: \"Let me explain each configuration parameter for Syngrisi.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Let me explain each configuration parameter for Syngrisi.\"","children":[{"start":13,"value":"Let me explain each configuration parameter for Syngrisi.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":73,"gherkinStepLine":133,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER 1: SSO_ENABLED=true\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER 1: SSO_ENABLED=true\"","children":[{"start":13,"value":"PARAMETER 1: SSO_ENABLED=true","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":74,"gherkinStepLine":134,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Enables Single Sign-On authentication\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Enables Single Sign-On authentication\"","children":[{"start":13,"value":"Purpose: Enables Single Sign-On authentication","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":75,"gherkinStepLine":135,"keywordType":"Action","textWithKeyword":"When I announce: \"Effect: Displays the SSO login button on the login page\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Effect: Displays the SSO login button on the login page\"","children":[{"start":13,"value":"Effect: Displays the SSO login button on the login page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":76,"gherkinStepLine":138,"keywordType":"Action","textWithKeyword":"When I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":77,"gherkinStepLine":139,"keywordType":"Action","textWithKeyword":"When I announce: \"With SSO_ENABLED=true, users see this SSO login button.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"With SSO_ENABLED=true, users see this SSO login button.\"","children":[{"start":13,"value":"With SSO_ENABLED=true, users see this SSO login button.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":78,"gherkinStepLine":140,"keywordType":"Outcome","textWithKeyword":"Then the SSO login button should be visible","stepMatchArguments":[]},{"pwStepLine":79,"gherkinStepLine":141,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":80,"gherkinStepLine":144,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER 2: SSO_PROTOCOL=saml\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER 2: SSO_PROTOCOL=saml\"","children":[{"start":13,"value":"PARAMETER 2: SSO_PROTOCOL=saml","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":81,"gherkinStepLine":145,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Specifies the authentication protocol\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Specifies the authentication protocol\"","children":[{"start":13,"value":"Purpose: Specifies the authentication protocol","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":82,"gherkinStepLine":146,"keywordType":"Action","textWithKeyword":"When I announce: \"Options: 'saml' for SAML 2.0, 'oauth2' for OAuth2/OIDC\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Options: 'saml' for SAML 2.0, 'oauth2' for OAuth2/OIDC\"","children":[{"start":13,"value":"Options: 'saml' for SAML 2.0, 'oauth2' for OAuth2/OIDC","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":83,"gherkinStepLine":147,"keywordType":"Action","textWithKeyword":"When I announce: \"Effect: Determines which authentication flow to use\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Effect: Determines which authentication flow to use\"","children":[{"start":13,"value":"Effect: Determines which authentication flow to use","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":84,"gherkinStepLine":150,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER 3: SSO_ISSUER\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER 3: SSO_ISSUER\"","children":[{"start":13,"value":"PARAMETER 3: SSO_ISSUER","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":85,"gherkinStepLine":151,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Service Provider Entity ID\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Service Provider Entity ID\"","children":[{"start":13,"value":"Purpose: Service Provider Entity ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":86,"gherkinStepLine":152,"keywordType":"Action","textWithKeyword":"When I announce: \"Example: https://syngrisi.example.com\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Example: https://syngrisi.example.com\"","children":[{"start":13,"value":"Example: https://syngrisi.example.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":87,"gherkinStepLine":153,"keywordType":"Action","textWithKeyword":"When I announce: \"Must match: The SP Entity ID configured in your IdP\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Must match: The SP Entity ID configured in your IdP\"","children":[{"start":13,"value":"Must match: The SP Entity ID configured in your IdP","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":88,"gherkinStepLine":154,"keywordType":"Action","textWithKeyword":"When I announce: \"Effect: Identifies Syngrisi in SAML requests and assertions\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Effect: Identifies Syngrisi in SAML requests and assertions\"","children":[{"start":13,"value":"Effect: Identifies Syngrisi in SAML requests and assertions","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":89,"gherkinStepLine":157,"keywordType":"Action","textWithKeyword":"When I announce: \"Now let's look at how to configure the IdP connection. There are two methods:\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Now let's look at how to configure the IdP connection. There are two methods:\"","children":[{"start":13,"value":"Now let's look at how to configure the IdP connection. There are two methods:","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":90,"gherkinStepLine":160,"keywordType":"Action","textWithKeyword":"When I announce: \"METHOD 1: Automatic via Metadata URL (Recommended)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"METHOD 1: Automatic via Metadata URL (Recommended)\"","children":[{"start":13,"value":"METHOD 1: Automatic via Metadata URL (Recommended)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":91,"gherkinStepLine":161,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_IDP_METADATA_URL\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_IDP_METADATA_URL\"","children":[{"start":13,"value":"PARAMETER: SSO_IDP_METADATA_URL","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":92,"gherkinStepLine":162,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: URL to fetch IdP configuration automatically\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: URL to fetch IdP configuration automatically\"","children":[{"start":13,"value":"Purpose: URL to fetch IdP configuration automatically","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":93,"gherkinStepLine":163,"keywordType":"Action","textWithKeyword":"When I announce: \"Example: https://your-idp.com/saml/metadata\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Example: https://your-idp.com/saml/metadata\"","children":[{"start":13,"value":"Example: https://your-idp.com/saml/metadata","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":94,"gherkinStepLine":164,"keywordType":"Action","textWithKeyword":"When I announce: \"Benefit: Automatically gets SSO URL, certificate, and entity ID\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Benefit: Automatically gets SSO URL, certificate, and entity ID\"","children":[{"start":13,"value":"Benefit: Automatically gets SSO URL, certificate, and entity ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":95,"gherkinStepLine":165,"keywordType":"Action","textWithKeyword":"When I announce: \"Bonus: Certificate rotation is handled automatically\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Bonus: Certificate rotation is handled automatically\"","children":[{"start":13,"value":"Bonus: Certificate rotation is handled automatically","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":96,"gherkinStepLine":168,"keywordType":"Action","textWithKeyword":"When I announce: \"METHOD 2: Manual Configuration\"","stepMatchArguments":[{"group":{"start":12,"value":"\"METHOD 2: Manual Configuration\"","children":[{"start":13,"value":"METHOD 2: Manual Configuration","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":97,"gherkinStepLine":169,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_ENTRY_POINT\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_ENTRY_POINT\"","children":[{"start":13,"value":"PARAMETER: SSO_ENTRY_POINT","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":98,"gherkinStepLine":170,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: IdP's SSO URL where authentication requests are sent\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: IdP's SSO URL where authentication requests are sent\"","children":[{"start":13,"value":"Purpose: IdP's SSO URL where authentication requests are sent","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":99,"gherkinStepLine":171,"keywordType":"Action","textWithKeyword":"When I announce: \"Example: https://your-idp.com/saml/sso\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Example: https://your-idp.com/saml/sso\"","children":[{"start":13,"value":"Example: https://your-idp.com/saml/sso","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":100,"gherkinStepLine":173,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_CERT\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_CERT\"","children":[{"start":13,"value":"PARAMETER: SSO_CERT","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":101,"gherkinStepLine":174,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: IdP's signing certificate for verifying SAML assertions\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: IdP's signing certificate for verifying SAML assertions\"","children":[{"start":13,"value":"Purpose: IdP's signing certificate for verifying SAML assertions","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":102,"gherkinStepLine":175,"keywordType":"Action","textWithKeyword":"When I announce: \"Format: PEM format, can include BEGIN/END markers\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Format: PEM format, can include BEGIN/END markers\"","children":[{"start":13,"value":"Format: PEM format, can include BEGIN/END markers","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":103,"gherkinStepLine":176,"keywordType":"Action","textWithKeyword":"When I announce: \"Security: Must be set via environment variable, not UI\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Security: Must be set via environment variable, not UI\"","children":[{"start":13,"value":"Security: Must be set via environment variable, not UI","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":104,"gherkinStepLine":178,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_IDP_ISSUER (optional)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_IDP_ISSUER (optional)\"","children":[{"start":13,"value":"PARAMETER: SSO_IDP_ISSUER (optional)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":105,"gherkinStepLine":179,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: IdP Entity ID for additional validation\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: IdP Entity ID for additional validation\"","children":[{"start":13,"value":"Purpose: IdP Entity ID for additional validation","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":106,"gherkinStepLine":180,"keywordType":"Action","textWithKeyword":"When I announce: \"Benefit: Extra security check to verify assertion source\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Benefit: Extra security check to verify assertion source\"","children":[{"start":13,"value":"Benefit: Extra security check to verify assertion source","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":107,"gherkinStepLine":183,"keywordType":"Action","textWithKeyword":"When I announce: \"Finally, let's configure user management parameters:\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Finally, let's configure user management parameters:\"","children":[{"start":13,"value":"Finally, let's configure user management parameters:","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":108,"gherkinStepLine":185,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_DEFAULT_ROLE\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_DEFAULT_ROLE\"","children":[{"start":13,"value":"PARAMETER: SSO_DEFAULT_ROLE","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":109,"gherkinStepLine":186,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Default role for new users created via SSO\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Default role for new users created via SSO\"","children":[{"start":13,"value":"Purpose: Default role for new users created via SSO","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":110,"gherkinStepLine":187,"keywordType":"Action","textWithKeyword":"When I announce: \"Options: 'reviewer' (default), 'user', 'admin'\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Options: 'reviewer' (default), 'user', 'admin'\"","children":[{"start":13,"value":"Options: 'reviewer' (default), 'user', 'admin'","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":111,"gherkinStepLine":188,"keywordType":"Action","textWithKeyword":"When I announce: \"Effect: Controls what new SSO users can do in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Effect: Controls what new SSO users can do in Syngrisi\"","children":[{"start":13,"value":"Effect: Controls what new SSO users can do in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":112,"gherkinStepLine":190,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_AUTO_CREATE_USERS\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_AUTO_CREATE_USERS\"","children":[{"start":13,"value":"PARAMETER: SSO_AUTO_CREATE_USERS","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":113,"gherkinStepLine":191,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Automatically create users on first SSO login\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Automatically create users on first SSO login\"","children":[{"start":13,"value":"Purpose: Automatically create users on first SSO login","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":114,"gherkinStepLine":192,"keywordType":"Action","textWithKeyword":"When I announce: \"Default: true\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Default: true\"","children":[{"start":13,"value":"Default: true","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":115,"gherkinStepLine":193,"keywordType":"Action","textWithKeyword":"When I announce: \"If false: Users must be pre-created in Syngrisi\"","stepMatchArguments":[{"group":{"start":12,"value":"\"If false: Users must be pre-created in Syngrisi\"","children":[{"start":13,"value":"If false: Users must be pre-created in Syngrisi","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":116,"gherkinStepLine":195,"keywordType":"Action","textWithKeyword":"When I announce: \"PARAMETER: SSO_ALLOW_ACCOUNT_LINKING\"","stepMatchArguments":[{"group":{"start":12,"value":"\"PARAMETER: SSO_ALLOW_ACCOUNT_LINKING\"","children":[{"start":13,"value":"PARAMETER: SSO_ALLOW_ACCOUNT_LINKING","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":117,"gherkinStepLine":196,"keywordType":"Action","textWithKeyword":"When I announce: \"Purpose: Link SSO identities to existing local accounts by email\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Purpose: Link SSO identities to existing local accounts by email\"","children":[{"start":13,"value":"Purpose: Link SSO identities to existing local accounts by email","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":118,"gherkinStepLine":197,"keywordType":"Action","textWithKeyword":"When I announce: \"Default: true\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Default: true\"","children":[{"start":13,"value":"Default: true","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":119,"gherkinStepLine":198,"keywordType":"Action","textWithKeyword":"When I announce: \"Benefit: Existing users can migrate to SSO without losing access\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Benefit: Existing users can migrate to SSO without losing access\"","children":[{"start":13,"value":"Benefit: Existing users can migrate to SSO without losing access","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":120,"gherkinStepLine":201,"keywordType":"Action","textWithKeyword":"When I announce: \"BONUS: SP Metadata Endpoint\"","stepMatchArguments":[{"group":{"start":12,"value":"\"BONUS: SP Metadata Endpoint\"","children":[{"start":13,"value":"BONUS: SP Metadata Endpoint","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":121,"gherkinStepLine":202,"keywordType":"Action","textWithKeyword":"When I announce: \"Syngrisi provides an endpoint to get SP metadata for IdP configuration:\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Syngrisi provides an endpoint to get SP metadata for IdP configuration:\"","children":[{"start":13,"value":"Syngrisi provides an endpoint to get SP metadata for IdP configuration:","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":122,"gherkinStepLine":203,"keywordType":"Action","textWithKeyword":"When I announce: \"GET /v1/auth/sso/metadata\"","stepMatchArguments":[{"group":{"start":12,"value":"\"GET /v1/auth/sso/metadata\"","children":[{"start":13,"value":"GET /v1/auth/sso/metadata","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":123,"gherkinStepLine":204,"keywordType":"Action","textWithKeyword":"When I announce: \"Returns XML with Entity ID and ACS URL for your IdP setup\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Returns XML with Entity ID and ACS URL for your IdP setup\"","children":[{"start":13,"value":"Returns XML with Entity ID and ACS URL for your IdP setup","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":124,"gherkinStepLine":207,"keywordType":"Action","textWithKeyword":"When I announce: \"Configuration complete! Let's verify it works with a test login.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Configuration complete! Let's verify it works with a test login.\"","children":[{"start":13,"value":"Configuration complete! Let's verify it works with a test login.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":125,"gherkinStepLine":209,"keywordType":"Action","textWithKeyword":"When I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":126,"gherkinStepLine":210,"keywordType":"Action","textWithKeyword":"When I announce: \"Click the SSO button to authenticate via SAML.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Click the SSO button to authenticate via SAML.\"","children":[{"start":13,"value":"Click the SSO button to authenticate via SAML.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":127,"gherkinStepLine":211,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":128,"gherkinStepLine":213,"keywordType":"Action","textWithKeyword":"When I click SSO login button","stepMatchArguments":[]},{"pwStepLine":129,"gherkinStepLine":214,"keywordType":"Action","textWithKeyword":"When I announce: \"We're now at the Identity Provider. Enter credentials to authenticate.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"We're now at the Identity Provider. Enter credentials to authenticate.\"","children":[{"start":13,"value":"We're now at the Identity Provider. Enter credentials to authenticate.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":130,"gherkinStepLine":216,"keywordType":"Action","textWithKeyword":"When I login to Logto with username \"testuser\" and password \"Test123!\"","stepMatchArguments":[{"group":{"start":31,"value":"\"testuser\"","children":[{"start":32,"value":"testuser","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"Test123!\"","children":[{"start":56,"value":"Test123!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":131,"gherkinStepLine":218,"keywordType":"Outcome","textWithKeyword":"Then I should be redirected back to the app","stepMatchArguments":[]},{"pwStepLine":132,"gherkinStepLine":219,"keywordType":"Outcome","textWithKeyword":"Then I should be authenticated via SSO","stepMatchArguments":[]},{"pwStepLine":133,"gherkinStepLine":221,"keywordType":"Action","textWithKeyword":"When I announce: \"Success! SAML SSO is fully configured and working.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Success! SAML SSO is fully configured and working.\"","children":[{"start":13,"value":"Success! SAML SSO is fully configured and working.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":134,"gherkinStepLine":222,"keywordType":"Action","textWithKeyword":"When I announce: \"The user is now authenticated via SAML with all configured parameters in effect.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"The user is now authenticated via SAML with all configured parameters in effect.\"","children":[{"start":13,"value":"The user is now authenticated via SAML with all configured parameters in effect.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":135,"gherkinStepLine":223,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
  {"pwTestLine":138,"pickleLine":230,"slow":true,"tags":["@demo","@slow","@saml","@sso","@sso-external"],"steps":[{"pwStepLine":139,"gherkinStepLine":233,"keywordType":"Action","textWithKeyword":"When I configure SAML SSO with auto-provisioned settings","stepMatchArguments":[]},{"pwStepLine":140,"gherkinStepLine":234,"keywordType":"Action","textWithKeyword":"When I set env variables:","stepMatchArguments":[]},{"pwStepLine":141,"gherkinStepLine":239,"keywordType":"Context","textWithKeyword":"Given I start Server","stepMatchArguments":[]},{"pwStepLine":142,"gherkinStepLine":241,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":143,"gherkinStepLine":242,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":144,"gherkinStepLine":244,"keywordType":"Action","textWithKeyword":"When I announce: \"This is a complete SAML SSO demonstration showing configuration and login.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This is a complete SAML SSO demonstration showing configuration and login.\"","children":[{"start":13,"value":"This is a complete SAML SSO demonstration showing configuration and login.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":145,"gherkinStepLine":247,"keywordType":"Action","textWithKeyword":"When I announce: \"SAML Configuration Summary:\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SAML Configuration Summary:\"","children":[{"start":13,"value":"SAML Configuration Summary:","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":146,"gherkinStepLine":248,"keywordType":"Action","textWithKeyword":"When I announce: \"SSO_ENABLED: true (enables SSO)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SSO_ENABLED: true (enables SSO)\"","children":[{"start":13,"value":"SSO_ENABLED: true (enables SSO)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":147,"gherkinStepLine":249,"keywordType":"Action","textWithKeyword":"When I announce: \"SSO_PROTOCOL: saml (use SAML 2.0)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SSO_PROTOCOL: saml (use SAML 2.0)\"","children":[{"start":13,"value":"SSO_PROTOCOL: saml (use SAML 2.0)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":148,"gherkinStepLine":250,"keywordType":"Action","textWithKeyword":"When I announce: \"SSO_ISSUER: SP Entity ID\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SSO_ISSUER: SP Entity ID\"","children":[{"start":13,"value":"SSO_ISSUER: SP Entity ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":149,"gherkinStepLine":251,"keywordType":"Action","textWithKeyword":"When I announce: \"SSO_IDP_METADATA_URL: Auto-configure from IdP metadata\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SSO_IDP_METADATA_URL: Auto-configure from IdP metadata\"","children":[{"start":13,"value":"SSO_IDP_METADATA_URL: Auto-configure from IdP metadata","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":150,"gherkinStepLine":252,"keywordType":"Action","textWithKeyword":"When I announce: \"SSO_DEFAULT_ROLE: reviewer (new user role)\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SSO_DEFAULT_ROLE: reviewer (new user role)\"","children":[{"start":13,"value":"SSO_DEFAULT_ROLE: reviewer (new user role)","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":151,"gherkinStepLine":255,"keywordType":"Action","textWithKeyword":"When I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":152,"gherkinStepLine":256,"keywordType":"Outcome","textWithKeyword":"Then the SSO login button should be visible","stepMatchArguments":[]},{"pwStepLine":153,"gherkinStepLine":257,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":154,"gherkinStepLine":259,"keywordType":"Action","textWithKeyword":"When I click SSO login button","stepMatchArguments":[]},{"pwStepLine":155,"gherkinStepLine":260,"keywordType":"Action","textWithKeyword":"When I login to Logto with username \"testuser\" and password \"Test123!\"","stepMatchArguments":[{"group":{"start":31,"value":"\"testuser\"","children":[{"start":32,"value":"testuser","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"Test123!\"","children":[{"start":56,"value":"Test123!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":156,"gherkinStepLine":262,"keywordType":"Outcome","textWithKeyword":"Then I should be redirected back to the app","stepMatchArguments":[]},{"pwStepLine":157,"gherkinStepLine":263,"keywordType":"Outcome","textWithKeyword":"Then I should be authenticated via SSO","stepMatchArguments":[]},{"pwStepLine":158,"gherkinStepLine":265,"keywordType":"Action","textWithKeyword":"When I announce: \"SAML SSO setup and login complete!\"","stepMatchArguments":[{"group":{"start":12,"value":"\"SAML SSO setup and login complete!\"","children":[{"start":13,"value":"SAML SSO setup and login complete!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":159,"gherkinStepLine":266,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
]; // bdd-data-end