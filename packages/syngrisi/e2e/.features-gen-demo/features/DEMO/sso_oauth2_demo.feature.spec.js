// Generated from: features/DEMO/sso_oauth2_demo.feature
import { test } from "../../../support/fixtures/index.ts";

test.describe('SSO OAuth2 Authentication Demo', () => {

  test.beforeEach('Background', async ({ Given, When, appServer, ssoServer, testData }, testInfo) => { if (testInfo.error) return;
    await When('I configure SSO with client ID "syngrisi-e2e-test" and secret "auto-provisioned"', null, { ssoServer }); 
    await When('I set env variables:', {"docString":{"content":"SYNGRISI_AUTH: true\nSYNGRISI_TEST_MODE: false"}}, { appServer }); 
    await Given('I start Server', null, { appServer, testData }); 
  });
  
  test('Demo: OAuth2 SSO Login with Logto Identity Provider', { tag: ['@demo', '@sso-external', '@slow'] }, async ({ When, Then, And, appServer, page, ssoServer, testData }) => { 
    await Then('Logto SSO should be available', null, { ssoServer }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "Welcome to the Syngrisi SSO demonstration. We will show how OAuth2 authentication works with Logto Identity Provider."', null, { page }); 
    await Then('the title is "Login Page"', null, { page }); 
    await When('I announce: "First, notice the Single Sign-On button on the login page. This button enables authentication through an external identity provider."', null, { page }); 
    await And('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await Then('the SSO login button should be visible', null, { page }); 
    await When('I announce: "When we click this button, Syngrisi will redirect you to the Logto Identity Provider for secure authentication."', null, { page }); 
    await And('I clear highlight', null, { page }); 
    await When('I click SSO login button', null, { page }); 
    await When('I announce: "Now we are on the Logto Identity Provider login page. Here, users authenticate using their corporate or organizational credentials."', null, { page }); 
    await When('I highlight element "input[name=\'identifier\']"', null, { page }); 
    await When('I announce: "First, we enter the username. In a real scenario, this would be your organizational username or email address."', null, { page }); 
    await When('I login to Logto with username "testuser" and password "Test123!"', null, { page }); 
    await When('I announce: "After successful authentication, Logto issues an OAuth2 authorization code. Syngrisi exchanges this code for an access token to verify your identity."', null, { page }); 
    await Then('I should be redirected back to the app', null, { appServer, page }); 
    await When('I announce: "Excellent! You have been successfully authenticated via OAuth2 SSO and redirected back to Syngrisi."', null, { page }); 
    await Then('I should be authenticated via SSO', null, { page }); 
    await When('I highlight element "h1"', null, { page }); 
    await When('I announce: "You are now on the main dashboard. Notice that no password was stored in Syngrisi - all authentication is handled securely by the Identity Provider."', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I announce: "This OAuth2 SSO flow provides secure, centralized authentication for your organization. Fantastic!"', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

  test('Demo: OAuth2 Configuration Overview', { tag: ['@demo', '@sso-external', '@slow'] }, async ({ When, Then, And, appServer, page, ssoServer, testData }) => { 
    await Then('Logto SSO should be available', null, { ssoServer }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "Let me show you how OAuth2 SSO is configured in Syngrisi."', null, { page }); 
    await Then('the title is "Login Page"', null, { page }); 
    await When('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await When('I announce: "OAuth2 SSO requires several configuration parameters: Client ID, Client Secret, Authorization URL, Token URL, and Callback URL."', null, { page }); 
    await When('I announce: "The Client ID identifies your Syngrisi application to the Identity Provider. The Client Secret is used to securely exchange authorization codes for access tokens."', null, { page }); 
    await When('I announce: "The Authorization URL is where users are redirected to log in. The Token URL is where Syngrisi exchanges codes for tokens."', null, { page }); 
    await When('I announce: "Finally, the Callback URL is where the Identity Provider redirects users after successful authentication."', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I announce: "With these parameters configured, Syngrisi can securely integrate with any OAuth2-compliant Identity Provider."', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

  test('Demo: OAuth2 Account Linking', { tag: ['@demo', '@sso-external', '@slow'] }, async ({ When, Then, And, appServer, page, ssoServer, testData }) => { 
    await Then('Logto SSO should be available', null, { ssoServer }); 
    await When('I reset user "test@syngrisi.test" provider to local', null, { appServer }); 
    await When('I reload session', null, { page, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await When('I announce: "This demonstration shows how OAuth2 handles existing Syngrisi users. If a user with the same email already exists, their account is automatically linked to the OAuth provider."', null, { page }); 
    await Then('the title is "Login Page"', null, { page }); 
    await When('I highlight element "a[href*=\'/v1/auth/sso\']"', null, { page }); 
    await When('I announce: "When this existing user logs in via SSO, Syngrisi will match the email address and link the accounts seamlessly."', null, { page }); 
    await When('I clear highlight', null, { page }); 
    await When('I click SSO login button', null, { page }); 
    await When('I announce: "Authenticating with the test user who already exists in the Syngrisi database."', null, { page }); 
    await When('I login to Logto with username "testuser" and password "Test123!"', null, { page }); 
    await Then('I should be redirected back to the app', null, { appServer, page }); 
    await Then('I should be authenticated via SSO', null, { page }); 
    await Then('the user "test@syngrisi.test" should have provider type "oauth"', null, { appServer }); 
    await When('I announce: "Perfect! The existing local account has been successfully linked to the OAuth provider. Future logins will use SSO authentication."', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('features/DEMO/sso_oauth2_demo.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":12,"pickleLine":24,"slow":true,"tags":["@demo","@sso-external","@slow"],"steps":[{"pwStepLine":7,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"When I configure SSO with client ID \"syngrisi-e2e-test\" and secret \"auto-provisioned\"","isBg":true,"stepMatchArguments":[{"group":{"start":31,"value":"\"syngrisi-e2e-test\"","children":[{"start":32,"value":"syngrisi-e2e-test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":62,"value":"\"auto-provisioned\"","children":[{"start":63,"value":"auto-provisioned","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"When I set env variables:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":22,"keywordType":"Context","textWithKeyword":"Given I start Server","isBg":true,"stepMatchArguments":[]},{"pwStepLine":13,"gherkinStepLine":26,"keywordType":"Outcome","textWithKeyword":"Then Logto SSO should be available","stepMatchArguments":[]},{"pwStepLine":14,"gherkinStepLine":29,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":15,"gherkinStepLine":30,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":16,"gherkinStepLine":33,"keywordType":"Action","textWithKeyword":"When I announce: \"Welcome to the Syngrisi SSO demonstration. We will show how OAuth2 authentication works with Logto Identity Provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Welcome to the Syngrisi SSO demonstration. We will show how OAuth2 authentication works with Logto Identity Provider.\"","children":[{"start":13,"value":"Welcome to the Syngrisi SSO demonstration. We will show how OAuth2 authentication works with Logto Identity Provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":34,"keywordType":"Outcome","textWithKeyword":"Then the title is \"Login Page\"","stepMatchArguments":[{"group":{"start":13,"value":"\"Login Page\"","children":[{"start":14,"value":"Login Page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":37,"keywordType":"Action","textWithKeyword":"When I announce: \"First, notice the Single Sign-On button on the login page. This button enables authentication through an external identity provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"First, notice the Single Sign-On button on the login page. This button enables authentication through an external identity provider.\"","children":[{"start":13,"value":"First, notice the Single Sign-On button on the login page. This button enables authentication through an external identity provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":19,"gherkinStepLine":38,"keywordType":"Action","textWithKeyword":"And I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":39,"keywordType":"Outcome","textWithKeyword":"Then the SSO login button should be visible","stepMatchArguments":[]},{"pwStepLine":21,"gherkinStepLine":42,"keywordType":"Action","textWithKeyword":"When I announce: \"When we click this button, Syngrisi will redirect you to the Logto Identity Provider for secure authentication.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"When we click this button, Syngrisi will redirect you to the Logto Identity Provider for secure authentication.\"","children":[{"start":13,"value":"When we click this button, Syngrisi will redirect you to the Logto Identity Provider for secure authentication.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":43,"keywordType":"Action","textWithKeyword":"And I clear highlight","stepMatchArguments":[]},{"pwStepLine":23,"gherkinStepLine":44,"keywordType":"Action","textWithKeyword":"When I click SSO login button","stepMatchArguments":[]},{"pwStepLine":24,"gherkinStepLine":47,"keywordType":"Action","textWithKeyword":"When I announce: \"Now we are on the Logto Identity Provider login page. Here, users authenticate using their corporate or organizational credentials.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Now we are on the Logto Identity Provider login page. Here, users authenticate using their corporate or organizational credentials.\"","children":[{"start":13,"value":"Now we are on the Logto Identity Provider login page. Here, users authenticate using their corporate or organizational credentials.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":50,"keywordType":"Action","textWithKeyword":"When I highlight element \"input[name='identifier']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"input[name='identifier']\"","children":[{"start":21,"value":"input[name='identifier']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":51,"keywordType":"Action","textWithKeyword":"When I announce: \"First, we enter the username. In a real scenario, this would be your organizational username or email address.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"First, we enter the username. In a real scenario, this would be your organizational username or email address.\"","children":[{"start":13,"value":"First, we enter the username. In a real scenario, this would be your organizational username or email address.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":54,"keywordType":"Action","textWithKeyword":"When I login to Logto with username \"testuser\" and password \"Test123!\"","stepMatchArguments":[{"group":{"start":31,"value":"\"testuser\"","children":[{"start":32,"value":"testuser","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"Test123!\"","children":[{"start":56,"value":"Test123!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":57,"keywordType":"Action","textWithKeyword":"When I announce: \"After successful authentication, Logto issues an OAuth2 authorization code. Syngrisi exchanges this code for an access token to verify your identity.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"After successful authentication, Logto issues an OAuth2 authorization code. Syngrisi exchanges this code for an access token to verify your identity.\"","children":[{"start":13,"value":"After successful authentication, Logto issues an OAuth2 authorization code. Syngrisi exchanges this code for an access token to verify your identity.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":29,"gherkinStepLine":60,"keywordType":"Outcome","textWithKeyword":"Then I should be redirected back to the app","stepMatchArguments":[]},{"pwStepLine":30,"gherkinStepLine":63,"keywordType":"Action","textWithKeyword":"When I announce: \"Excellent! You have been successfully authenticated via OAuth2 SSO and redirected back to Syngrisi.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Excellent! You have been successfully authenticated via OAuth2 SSO and redirected back to Syngrisi.\"","children":[{"start":13,"value":"Excellent! You have been successfully authenticated via OAuth2 SSO and redirected back to Syngrisi.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":31,"gherkinStepLine":64,"keywordType":"Outcome","textWithKeyword":"Then I should be authenticated via SSO","stepMatchArguments":[]},{"pwStepLine":32,"gherkinStepLine":67,"keywordType":"Action","textWithKeyword":"When I highlight element \"h1\"","stepMatchArguments":[{"group":{"start":20,"value":"\"h1\"","children":[{"start":21,"value":"h1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":68,"keywordType":"Action","textWithKeyword":"When I announce: \"You are now on the main dashboard. Notice that no password was stored in Syngrisi - all authentication is handled securely by the Identity Provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"You are now on the main dashboard. Notice that no password was stored in Syngrisi - all authentication is handled securely by the Identity Provider.\"","children":[{"start":13,"value":"You are now on the main dashboard. Notice that no password was stored in Syngrisi - all authentication is handled securely by the Identity Provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":71,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":35,"gherkinStepLine":72,"keywordType":"Action","textWithKeyword":"When I announce: \"This OAuth2 SSO flow provides secure, centralized authentication for your organization. Fantastic!\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This OAuth2 SSO flow provides secure, centralized authentication for your organization. Fantastic!\"","children":[{"start":13,"value":"This OAuth2 SSO flow provides secure, centralized authentication for your organization. Fantastic!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":36,"gherkinStepLine":73,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
  {"pwTestLine":39,"pickleLine":75,"slow":true,"tags":["@demo","@sso-external","@slow"],"steps":[{"pwStepLine":7,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"When I configure SSO with client ID \"syngrisi-e2e-test\" and secret \"auto-provisioned\"","isBg":true,"stepMatchArguments":[{"group":{"start":31,"value":"\"syngrisi-e2e-test\"","children":[{"start":32,"value":"syngrisi-e2e-test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":62,"value":"\"auto-provisioned\"","children":[{"start":63,"value":"auto-provisioned","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"When I set env variables:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":22,"keywordType":"Context","textWithKeyword":"Given I start Server","isBg":true,"stepMatchArguments":[]},{"pwStepLine":40,"gherkinStepLine":77,"keywordType":"Outcome","textWithKeyword":"Then Logto SSO should be available","stepMatchArguments":[]},{"pwStepLine":41,"gherkinStepLine":79,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":42,"gherkinStepLine":80,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":43,"gherkinStepLine":83,"keywordType":"Action","textWithKeyword":"When I announce: \"Let me show you how OAuth2 SSO is configured in Syngrisi.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Let me show you how OAuth2 SSO is configured in Syngrisi.\"","children":[{"start":13,"value":"Let me show you how OAuth2 SSO is configured in Syngrisi.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":44,"gherkinStepLine":84,"keywordType":"Outcome","textWithKeyword":"Then the title is \"Login Page\"","stepMatchArguments":[{"group":{"start":13,"value":"\"Login Page\"","children":[{"start":14,"value":"Login Page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":45,"gherkinStepLine":87,"keywordType":"Action","textWithKeyword":"When I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":46,"gherkinStepLine":88,"keywordType":"Action","textWithKeyword":"When I announce: \"OAuth2 SSO requires several configuration parameters: Client ID, Client Secret, Authorization URL, Token URL, and Callback URL.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"OAuth2 SSO requires several configuration parameters: Client ID, Client Secret, Authorization URL, Token URL, and Callback URL.\"","children":[{"start":13,"value":"OAuth2 SSO requires several configuration parameters: Client ID, Client Secret, Authorization URL, Token URL, and Callback URL.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":47,"gherkinStepLine":90,"keywordType":"Action","textWithKeyword":"When I announce: \"The Client ID identifies your Syngrisi application to the Identity Provider. The Client Secret is used to securely exchange authorization codes for access tokens.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"The Client ID identifies your Syngrisi application to the Identity Provider. The Client Secret is used to securely exchange authorization codes for access tokens.\"","children":[{"start":13,"value":"The Client ID identifies your Syngrisi application to the Identity Provider. The Client Secret is used to securely exchange authorization codes for access tokens.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":48,"gherkinStepLine":92,"keywordType":"Action","textWithKeyword":"When I announce: \"The Authorization URL is where users are redirected to log in. The Token URL is where Syngrisi exchanges codes for tokens.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"The Authorization URL is where users are redirected to log in. The Token URL is where Syngrisi exchanges codes for tokens.\"","children":[{"start":13,"value":"The Authorization URL is where users are redirected to log in. The Token URL is where Syngrisi exchanges codes for tokens.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":49,"gherkinStepLine":94,"keywordType":"Action","textWithKeyword":"When I announce: \"Finally, the Callback URL is where the Identity Provider redirects users after successful authentication.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Finally, the Callback URL is where the Identity Provider redirects users after successful authentication.\"","children":[{"start":13,"value":"Finally, the Callback URL is where the Identity Provider redirects users after successful authentication.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":50,"gherkinStepLine":97,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":51,"gherkinStepLine":98,"keywordType":"Action","textWithKeyword":"When I announce: \"With these parameters configured, Syngrisi can securely integrate with any OAuth2-compliant Identity Provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"With these parameters configured, Syngrisi can securely integrate with any OAuth2-compliant Identity Provider.\"","children":[{"start":13,"value":"With these parameters configured, Syngrisi can securely integrate with any OAuth2-compliant Identity Provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":52,"gherkinStepLine":99,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
  {"pwTestLine":55,"pickleLine":101,"slow":true,"tags":["@demo","@sso-external","@slow"],"steps":[{"pwStepLine":7,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"When I configure SSO with client ID \"syngrisi-e2e-test\" and secret \"auto-provisioned\"","isBg":true,"stepMatchArguments":[{"group":{"start":31,"value":"\"syngrisi-e2e-test\"","children":[{"start":32,"value":"syngrisi-e2e-test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":62,"value":"\"auto-provisioned\"","children":[{"start":63,"value":"auto-provisioned","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"When I set env variables:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":22,"keywordType":"Context","textWithKeyword":"Given I start Server","isBg":true,"stepMatchArguments":[]},{"pwStepLine":56,"gherkinStepLine":103,"keywordType":"Outcome","textWithKeyword":"Then Logto SSO should be available","stepMatchArguments":[]},{"pwStepLine":57,"gherkinStepLine":106,"keywordType":"Action","textWithKeyword":"When I reset user \"test@syngrisi.test\" provider to local","stepMatchArguments":[{"group":{"start":13,"value":"\"test@syngrisi.test\"","children":[{"start":14,"value":"test@syngrisi.test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":58,"gherkinStepLine":108,"keywordType":"Action","textWithKeyword":"When I reload session","stepMatchArguments":[]},{"pwStepLine":59,"gherkinStepLine":109,"keywordType":"Action","textWithKeyword":"When I open the app","stepMatchArguments":[]},{"pwStepLine":60,"gherkinStepLine":112,"keywordType":"Action","textWithKeyword":"When I announce: \"This demonstration shows how OAuth2 handles existing Syngrisi users. If a user with the same email already exists, their account is automatically linked to the OAuth provider.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"This demonstration shows how OAuth2 handles existing Syngrisi users. If a user with the same email already exists, their account is automatically linked to the OAuth provider.\"","children":[{"start":13,"value":"This demonstration shows how OAuth2 handles existing Syngrisi users. If a user with the same email already exists, their account is automatically linked to the OAuth provider.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":61,"gherkinStepLine":113,"keywordType":"Outcome","textWithKeyword":"Then the title is \"Login Page\"","stepMatchArguments":[{"group":{"start":13,"value":"\"Login Page\"","children":[{"start":14,"value":"Login Page","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":62,"gherkinStepLine":116,"keywordType":"Action","textWithKeyword":"When I highlight element \"a[href*='/v1/auth/sso']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"a[href*='/v1/auth/sso']\"","children":[{"start":21,"value":"a[href*='/v1/auth/sso']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":63,"gherkinStepLine":117,"keywordType":"Action","textWithKeyword":"When I announce: \"When this existing user logs in via SSO, Syngrisi will match the email address and link the accounts seamlessly.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"When this existing user logs in via SSO, Syngrisi will match the email address and link the accounts seamlessly.\"","children":[{"start":13,"value":"When this existing user logs in via SSO, Syngrisi will match the email address and link the accounts seamlessly.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":64,"gherkinStepLine":120,"keywordType":"Action","textWithKeyword":"When I clear highlight","stepMatchArguments":[]},{"pwStepLine":65,"gherkinStepLine":121,"keywordType":"Action","textWithKeyword":"When I click SSO login button","stepMatchArguments":[]},{"pwStepLine":66,"gherkinStepLine":124,"keywordType":"Action","textWithKeyword":"When I announce: \"Authenticating with the test user who already exists in the Syngrisi database.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Authenticating with the test user who already exists in the Syngrisi database.\"","children":[{"start":13,"value":"Authenticating with the test user who already exists in the Syngrisi database.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":67,"gherkinStepLine":125,"keywordType":"Action","textWithKeyword":"When I login to Logto with username \"testuser\" and password \"Test123!\"","stepMatchArguments":[{"group":{"start":31,"value":"\"testuser\"","children":[{"start":32,"value":"testuser","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":55,"value":"\"Test123!\"","children":[{"start":56,"value":"Test123!","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":68,"gherkinStepLine":128,"keywordType":"Outcome","textWithKeyword":"Then I should be redirected back to the app","stepMatchArguments":[]},{"pwStepLine":69,"gherkinStepLine":129,"keywordType":"Outcome","textWithKeyword":"Then I should be authenticated via SSO","stepMatchArguments":[]},{"pwStepLine":70,"gherkinStepLine":132,"keywordType":"Outcome","textWithKeyword":"Then the user \"test@syngrisi.test\" should have provider type \"oauth\"","stepMatchArguments":[{"group":{"start":9,"value":"\"test@syngrisi.test\"","children":[{"start":10,"value":"test@syngrisi.test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":56,"value":"\"oauth\"","children":[{"start":57,"value":"oauth","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":71,"gherkinStepLine":135,"keywordType":"Action","textWithKeyword":"When I announce: \"Perfect! The existing local account has been successfully linked to the OAuth provider. Future logins will use SSO authentication.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Perfect! The existing local account has been successfully linked to the OAuth provider. Future logins will use SSO authentication.\"","children":[{"start":13,"value":"Perfect! The existing local account has been successfully linked to the OAuth provider. Future logins will use SSO authentication.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":72,"gherkinStepLine":136,"keywordType":"Action","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
]; // bdd-data-end