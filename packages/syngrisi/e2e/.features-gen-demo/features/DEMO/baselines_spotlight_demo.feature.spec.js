// Generated from: features/DEMO/baselines_spotlight_demo.feature
import { test } from "../../../support/fixtures/index.ts";

test.describe('Baselines Spotlight Demo', () => {

  test.beforeEach('Background', async ({ Given, When, And, appServer, page, testData }, testInfo) => { if (testInfo.error) return;
    await Given('the database is cleared', null, { appServer }); 
    await And('I seed via http baselines with usage:', {"docString":{"content":"baselines:\n  - name: spotlight-baseline\n    checkName: Spotlight baseline\n    filePath: files/A.png\n    browserName: chromium\n    viewport: 1280x720\n    os: linux\n    usageCount: 2"}}, { appServer, testData }); 
    await When('I open the app', null, { appServer, page, testData }); 
    await And('I login with user:"Test" password "123456aA-"', null, { appServer, page, testData }); 
    await And('I go to "main" page', null, { appServer, page }); 
  });
  
  test('Demo: navigate to baselines via Spotlight', { tag: ['@demo', '@env:SYNGRISI_AUTH:true', '@env:SYNGRISI_DISABLE_FIRST_RUN:true'] }, async ({ When, Then, And, page, testData }) => { 
    await When('I announce: "Покажу, как найти новый раздел Baselines через Spotlight."', null, { page }); 
    await And('I highlight element "button[aria-label=\'Search\']"', null, { page }); 
    await When('I click element with locator "button[aria-label=\'Search\']"', null, { page, testData }); 
    await And('I announce: "Открываю поиск Spotlight."', null, { page }); 
    await And('I highlight element "[aria-label=\'Spotlight search\']"', null, { page }); 
    await And('I fill "Baselines" into element with placeholder "Search..."', null, { page, testData }); 
    await And('I announce: "Ищу раздел Baselines."', null, { page }); 
    await And('I wait 10 seconds for the button with name "Baselines" to be visible', null, { page, testData }); 
    await And('I highlight element "text=Baselines"', null, { page }); 
    await And('I announce: "Выбираю пункт Baselines в результатах."', null, { page }); 
    await When('I click the 1st button "Baselines"', null, { page, testData }); 
    await Then('the current url contains "/baselines"', null, { page, testData }); 
    await And('I announce: "Мы на странице Baselines."', null, { page }); 
    await And('I highlight element "[data-test=\'table-header-Name\']"', null, { page }); 
    await And('I wait 30 seconds for the element with locator "[data-row-name=\'Spotlight baseline\']" to be visible', null, { page, testData }); 
    await And('I highlight element "[data-row-name=\'Spotlight baseline\']"', null, { page }); 
    await And('I announce: "Нашёл нужный бейзлайн."', null, { page }); 
    await When('I click element with locator "[data-row-name=\'Spotlight baseline\']"', null, { page, testData }); 
    await Then('the current url contains "<baselineSeed.usageSnapshotId>"', null, { page, testData }); 
    await And('I announce: "Мы перешли к тестам, отфильтрованным по выбранному бейзлайну."', null, { page }); 
    await And('I clear highlight', null, { page }); 
    await And('I end the demo', null, { page }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('features/DEMO/baselines_spotlight_demo.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":14,"pickleLine":21,"tags":["@demo","@env:SYNGRISI_AUTH:true","@env:SYNGRISI_DISABLE_FIRST_RUN:true"],"steps":[{"pwStepLine":7,"gherkinStepLine":5,"keywordType":"Context","textWithKeyword":"Given the database is cleared","isBg":true,"stepMatchArguments":[]},{"pwStepLine":8,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"And I seed via http baselines with usage:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"When I open the app","isBg":true,"stepMatchArguments":[]},{"pwStepLine":10,"gherkinStepLine":18,"keywordType":"Action","textWithKeyword":"And I login with user:\"Test\" password \"123456aA-\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"Test\"","children":[{"start":19,"value":"Test","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":34,"value":"\"123456aA-\"","children":[{"start":35,"value":"123456aA-","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":11,"gherkinStepLine":19,"keywordType":"Action","textWithKeyword":"And I go to \"main\" page","isBg":true,"stepMatchArguments":[{"group":{"start":8,"value":"\"main\"","children":[{"start":9,"value":"main","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":22,"keywordType":"Action","textWithKeyword":"When I announce: \"Покажу, как найти новый раздел Baselines через Spotlight.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Покажу, как найти новый раздел Baselines через Spotlight.\"","children":[{"start":13,"value":"Покажу, как найти новый раздел Baselines через Spotlight.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":16,"gherkinStepLine":23,"keywordType":"Action","textWithKeyword":"And I highlight element \"button[aria-label='Search']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"button[aria-label='Search']\"","children":[{"start":21,"value":"button[aria-label='Search']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":24,"keywordType":"Action","textWithKeyword":"When I click element with locator \"button[aria-label='Search']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"button[aria-label='Search']\"","children":[{"start":30,"value":"button[aria-label='Search']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":25,"keywordType":"Action","textWithKeyword":"And I announce: \"Открываю поиск Spotlight.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Открываю поиск Spotlight.\"","children":[{"start":13,"value":"Открываю поиск Spotlight.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":19,"gherkinStepLine":26,"keywordType":"Action","textWithKeyword":"And I highlight element \"[aria-label='Spotlight search']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"[aria-label='Spotlight search']\"","children":[{"start":21,"value":"[aria-label='Spotlight search']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":27,"keywordType":"Action","textWithKeyword":"And I fill \"Baselines\" into element with placeholder \"Search...\"","stepMatchArguments":[{"group":{"start":7,"value":"\"Baselines\"","children":[{"start":8,"value":"Baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":49,"value":"\"Search...\"","children":[{"start":50,"value":"Search...","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":28,"keywordType":"Action","textWithKeyword":"And I announce: \"Ищу раздел Baselines.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Ищу раздел Baselines.\"","children":[{"start":13,"value":"Ищу раздел Baselines.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":29,"keywordType":"Action","textWithKeyword":"And I wait 10 seconds for the button with name \"Baselines\" to be visible","stepMatchArguments":[{"group":{"start":7,"value":"10","children":[]},"parameterTypeName":"int"},{"group":{"start":26,"value":"button","children":[]},"parameterTypeName":"role"},{"group":{"start":38,"value":"name","children":[]},"parameterTypeName":"attribute"},{"group":{"start":43,"value":"\"Baselines\"","children":[{"start":44,"value":"Baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":61,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":23,"gherkinStepLine":30,"keywordType":"Action","textWithKeyword":"And I highlight element \"text=Baselines\"","stepMatchArguments":[{"group":{"start":20,"value":"\"text=Baselines\"","children":[{"start":21,"value":"text=Baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":31,"keywordType":"Action","textWithKeyword":"And I announce: \"Выбираю пункт Baselines в результатах.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Выбираю пункт Baselines в результатах.\"","children":[{"start":13,"value":"Выбираю пункт Baselines в результатах.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":32,"keywordType":"Action","textWithKeyword":"When I click the 1st button \"Baselines\"","stepMatchArguments":[{"group":{"start":12,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":16,"value":"button","children":[]},"parameterTypeName":"role"},{"group":{"start":23,"value":"\"Baselines\"","children":[{"start":24,"value":"Baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":33,"keywordType":"Outcome","textWithKeyword":"Then the current url contains \"/baselines\"","stepMatchArguments":[{"group":{"start":25,"value":"\"/baselines\"","children":[{"start":26,"value":"/baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":34,"keywordType":"Outcome","textWithKeyword":"And I announce: \"Мы на странице Baselines.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Мы на странице Baselines.\"","children":[{"start":13,"value":"Мы на странице Baselines.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":35,"keywordType":"Outcome","textWithKeyword":"And I highlight element \"[data-test='table-header-Name']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"[data-test='table-header-Name']\"","children":[{"start":21,"value":"[data-test='table-header-Name']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":29,"gherkinStepLine":36,"keywordType":"Outcome","textWithKeyword":"And I wait 30 seconds for the element with locator \"[data-row-name='Spotlight baseline']\" to be visible","stepMatchArguments":[{"group":{"start":7,"value":"30","children":[]},"parameterTypeName":"int"},{"group":{"start":26,"value":"element","children":[]},"parameterTypeName":"role"},{"group":{"start":39,"value":"locator","children":[]},"parameterTypeName":"attribute"},{"group":{"start":47,"value":"\"[data-row-name='Spotlight baseline']\"","children":[{"start":48,"value":"[data-row-name='Spotlight baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":92,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":30,"gherkinStepLine":37,"keywordType":"Outcome","textWithKeyword":"And I highlight element \"[data-row-name='Spotlight baseline']\"","stepMatchArguments":[{"group":{"start":20,"value":"\"[data-row-name='Spotlight baseline']\"","children":[{"start":21,"value":"[data-row-name='Spotlight baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":31,"gherkinStepLine":38,"keywordType":"Outcome","textWithKeyword":"And I announce: \"Нашёл нужный бейзлайн.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Нашёл нужный бейзлайн.\"","children":[{"start":13,"value":"Нашёл нужный бейзлайн.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":32,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-row-name='Spotlight baseline']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-row-name='Spotlight baseline']\"","children":[{"start":30,"value":"[data-row-name='Spotlight baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":40,"keywordType":"Outcome","textWithKeyword":"Then the current url contains \"<baselineSeed.usageSnapshotId>\"","stepMatchArguments":[{"group":{"start":25,"value":"\"<baselineSeed.usageSnapshotId>\"","children":[{"start":26,"value":"<baselineSeed.usageSnapshotId>","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":41,"keywordType":"Outcome","textWithKeyword":"And I announce: \"Мы перешли к тестам, отфильтрованным по выбранному бейзлайну.\"","stepMatchArguments":[{"group":{"start":12,"value":"\"Мы перешли к тестам, отфильтрованным по выбранному бейзлайну.\"","children":[{"start":13,"value":"Мы перешли к тестам, отфильтрованным по выбранному бейзлайну.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":42,"keywordType":"Outcome","textWithKeyword":"And I clear highlight","stepMatchArguments":[]},{"pwStepLine":36,"gherkinStepLine":43,"keywordType":"Outcome","textWithKeyword":"And I end the demo","stepMatchArguments":[]}]},
]; // bdd-data-end