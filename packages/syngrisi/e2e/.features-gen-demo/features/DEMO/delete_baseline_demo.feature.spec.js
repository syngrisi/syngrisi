// Generated from: features/DEMO/delete_baseline_demo.feature
import { test } from "../../../support/fixtures/index.ts";

test.describe('Delete Baseline Demo', () => {

  test.beforeEach('Background', async ({ Given, When, And, appServer, testData }, testInfo) => { if (testInfo.error) return;
    await When('I set env variables:', {"docString":{"content":"SYNGRISI_AUTH: \"false\"\nSYNGRISI_TEST_MODE: \"true\""}}, { appServer }); 
    await Given('I start Server', null, { appServer, testData }); 
    await And('I seed via http baselines with usage:', {"docString":{"content":"baselines:\n  - name: demo-baseline\n    checkName: check-1\n    usageCount: 2\n    filePath: files/A.png"}}, { appServer, testData }); 
  });
  
  test('Demo Delete Baseline Flow', { tag: ['@fast-server', '@demo'] }, async ({ When, Then, And, appServer, page, testData, testEngine }) => { 
    await When('I go to "baselines" page', null, { appServer, page }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await Then('the element with locator "[data-test=\'table-row-Name\']" should be visible', null, { page }); 
    await When('I pause with phrase: "Мы находимся на странице бейслайнов. Обратите внимание на \'demo-baseline\', который используется в 2 проверках."', null, { page, testEngine }); 
    await When('I click element with locator "[data-test=\'table-row-Name\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I pause with phrase: "Мы перешли к списку проверок, отфильтрованных по этому бейслайну."', null, { page, testEngine }); 
    await When('I click element with locator "tbody tr:first-child [data-test=\'table-row-Name\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I open the 1st check "check-1"', null, { page }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I pause with phrase: "Открыты детали проверки. Сейчас мы удалим связанный бейслайн."', null, { page, testEngine }); 
    await When('I click element with locator "[data-test=\'check-details-menu\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I pause with phrase: "В меню действий доступна опция \'Delete Baseline\'."', null, { page, testEngine }); 
    await When('I click element with locator "[data-test=\'menu-delete-baseline\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await Then('the text "Are you sure you want to delete this baseline?" should be visible', null, { page, testData }); 
    await Then('the text "2 checks" should be visible', null, { page, testData }); 
    await When('I pause with phrase: "Появилось окно подтверждения. Мы видим количество проверок (2), которые используют этот бейслайн."', null, { page, testEngine }); 
    await When('I click element with locator "button:has-text(\'Cancel\')"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await Then('the text "Are you sure you want to delete this baseline?" should not be visible', null, { page, testData }); 
    await When('I pause with phrase: "Мы отменили удаление. Давайте попробуем снова и подтвердим действие."', null, { page, testEngine }); 
    await When('I click element with locator "[data-test=\'check-details-menu\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I click element with locator "[data-test=\'menu-delete-baseline\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await When('I force click element with locator "[data-test=\'confirm-delete-baseline\']"', null, { page, testData }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await Then('the element with locator "[data-test=\'check-details-menu\']" should not be visible', null, { page }); 
    await And('I go to "baselines" page', null, { appServer, page }); 
    await Then('I wait for "1" seconds', null, { page, testData }); 
    await Then('the element with locator "[data-test=\'table-row-Name\']" should not be visible', null, { page }); 
    await When('I pause with phrase: "Бейслайн успешно удален и больше не отображается в списке."', null, { page, testEngine }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('features/DEMO/delete_baseline_demo.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":12,"pickleLine":20,"tags":["@fast-server","@demo"],"steps":[{"pwStepLine":7,"gherkinStepLine":5,"keywordType":"Action","textWithKeyword":"When I set env variables:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":8,"gherkinStepLine":10,"keywordType":"Context","textWithKeyword":"Given I start Server","isBg":true,"stepMatchArguments":[]},{"pwStepLine":9,"gherkinStepLine":11,"keywordType":"Context","textWithKeyword":"And I seed via http baselines with usage:","isBg":true,"stepMatchArguments":[]},{"pwStepLine":13,"gherkinStepLine":22,"keywordType":"Action","textWithKeyword":"When I go to \"baselines\" page","stepMatchArguments":[{"group":{"start":8,"value":"\"baselines\"","children":[{"start":9,"value":"baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":23,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":15,"gherkinStepLine":24,"keywordType":"Outcome","textWithKeyword":"Then the element with locator \"[data-test='table-row-Name']\" should be visible","stepMatchArguments":[{"group":{"start":17,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":25,"value":"\"[data-test='table-row-Name']\"","children":[{"start":26,"value":"[data-test='table-row-Name']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":66,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":16,"gherkinStepLine":26,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Мы находимся на странице бейслайнов. Обратите внимание на 'demo-baseline', который используется в 2 проверках.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Мы находимся на странице бейслайнов. Обратите внимание на 'demo-baseline', который используется в 2 проверках.\"","children":[{"start":22,"value":"Мы находимся на странице бейслайнов. Обратите внимание на 'demo-baseline', который используется в 2 проверках.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":29,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-test='table-row-Name']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-test='table-row-Name']\"","children":[{"start":30,"value":"[data-test='table-row-Name']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":30,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":19,"gherkinStepLine":32,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Мы перешли к списку проверок, отфильтрованных по этому бейслайну.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Мы перешли к списку проверок, отфильтрованных по этому бейслайну.\"","children":[{"start":22,"value":"Мы перешли к списку проверок, отфильтрованных по этому бейслайну.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":35,"keywordType":"Action","textWithKeyword":"When I click element with locator \"tbody tr:first-child [data-test='table-row-Name']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"tbody tr:first-child [data-test='table-row-Name']\"","children":[{"start":30,"value":"tbody tr:first-child [data-test='table-row-Name']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":36,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":22,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"When I open the 1st check \"check-1\"","stepMatchArguments":[{"group":{"start":11,"value":"1st","children":[]},"parameterTypeName":"ordinal"},{"group":{"start":21,"value":"\"check-1\"","children":[{"start":22,"value":"check-1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":23,"gherkinStepLine":40,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":24,"gherkinStepLine":42,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Открыты детали проверки. Сейчас мы удалим связанный бейслайн.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Открыты детали проверки. Сейчас мы удалим связанный бейслайн.\"","children":[{"start":22,"value":"Открыты детали проверки. Сейчас мы удалим связанный бейслайн.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":45,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-test='check-details-menu']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-test='check-details-menu']\"","children":[{"start":30,"value":"[data-test='check-details-menu']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":46,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":27,"gherkinStepLine":48,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"В меню действий доступна опция 'Delete Baseline'.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"В меню действий доступна опция 'Delete Baseline'.\"","children":[{"start":22,"value":"В меню действий доступна опция 'Delete Baseline'.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":51,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-test='menu-delete-baseline']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-test='menu-delete-baseline']\"","children":[{"start":30,"value":"[data-test='menu-delete-baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":29,"gherkinStepLine":52,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":30,"gherkinStepLine":53,"keywordType":"Outcome","textWithKeyword":"Then the text \"Are you sure you want to delete this baseline?\" should be visible","stepMatchArguments":[{"group":{"start":9,"value":"\"Are you sure you want to delete this baseline?\"","children":[{"start":10,"value":"Are you sure you want to delete this baseline?","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":68,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":31,"gherkinStepLine":54,"keywordType":"Outcome","textWithKeyword":"Then the text \"2 checks\" should be visible","stepMatchArguments":[{"group":{"start":9,"value":"\"2 checks\"","children":[{"start":10,"value":"2 checks","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":30,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":32,"gherkinStepLine":56,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Появилось окно подтверждения. Мы видим количество проверок (2), которые используют этот бейслайн.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Появилось окно подтверждения. Мы видим количество проверок (2), которые используют этот бейслайн.\"","children":[{"start":22,"value":"Появилось окно подтверждения. Мы видим количество проверок (2), которые используют этот бейслайн.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":59,"keywordType":"Action","textWithKeyword":"When I click element with locator \"button:has-text('Cancel')\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"button:has-text('Cancel')\"","children":[{"start":30,"value":"button:has-text('Cancel')","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":60,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":35,"gherkinStepLine":61,"keywordType":"Outcome","textWithKeyword":"Then the text \"Are you sure you want to delete this baseline?\" should not be visible","stepMatchArguments":[{"group":{"start":9,"value":"\"Are you sure you want to delete this baseline?\"","children":[{"start":10,"value":"Are you sure you want to delete this baseline?","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":72,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":36,"gherkinStepLine":63,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Мы отменили удаление. Давайте попробуем снова и подтвердим действие.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Мы отменили удаление. Давайте попробуем снова и подтвердим действие.\"","children":[{"start":22,"value":"Мы отменили удаление. Давайте попробуем снова и подтвердим действие.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":37,"gherkinStepLine":66,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-test='check-details-menu']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-test='check-details-menu']\"","children":[{"start":30,"value":"[data-test='check-details-menu']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":67,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":39,"gherkinStepLine":68,"keywordType":"Action","textWithKeyword":"When I click element with locator \"[data-test='menu-delete-baseline']\"","stepMatchArguments":[{"group":{"start":21,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":29,"value":"\"[data-test='menu-delete-baseline']\"","children":[{"start":30,"value":"[data-test='menu-delete-baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":40,"gherkinStepLine":69,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":41,"gherkinStepLine":70,"keywordType":"Action","textWithKeyword":"When I force click element with locator \"[data-test='confirm-delete-baseline']\"","stepMatchArguments":[{"group":{"start":35,"value":"\"[data-test='confirm-delete-baseline']\"","children":[{"start":36,"value":"[data-test='confirm-delete-baseline']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":42,"gherkinStepLine":71,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":43,"gherkinStepLine":74,"keywordType":"Outcome","textWithKeyword":"Then the element with locator \"[data-test='check-details-menu']\" should not be visible","stepMatchArguments":[{"group":{"start":17,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":25,"value":"\"[data-test='check-details-menu']\"","children":[{"start":26,"value":"[data-test='check-details-menu']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":74,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":44,"gherkinStepLine":75,"keywordType":"Outcome","textWithKeyword":"And I go to \"baselines\" page","stepMatchArguments":[{"group":{"start":8,"value":"\"baselines\"","children":[{"start":9,"value":"baselines","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":45,"gherkinStepLine":76,"keywordType":"Outcome","textWithKeyword":"Then I wait for \"1\" seconds","stepMatchArguments":[{"group":{"start":12,"value":"1","children":[]}}]},{"pwStepLine":46,"gherkinStepLine":77,"keywordType":"Outcome","textWithKeyword":"Then the element with locator \"[data-test='table-row-Name']\" should not be visible","stepMatchArguments":[{"group":{"start":17,"value":"locator","children":[]},"parameterTypeName":"target"},{"group":{"start":25,"value":"\"[data-test='table-row-Name']\"","children":[{"start":26,"value":"[data-test='table-row-Name']","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":70,"value":"visible","children":[]},"parameterTypeName":"condition"}]},{"pwStepLine":47,"gherkinStepLine":79,"keywordType":"Action","textWithKeyword":"When I pause with phrase: \"Бейслайн успешно удален и больше не отображается в списке.\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Бейслайн успешно удален и больше не отображается в списке.\"","children":[{"start":22,"value":"Бейслайн успешно удален и больше не отображается в списке.","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end